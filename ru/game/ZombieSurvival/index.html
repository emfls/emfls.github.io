<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>üßü –í—ã–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–∏ –∑–æ–º–±–∏</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QP5Q67GE5B"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-QP5Q67GE5B");
    </script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8830524482034754"
      crossorigin="anonymous"></script>
    <!-- SEO –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ -->
    <meta
      name="description"
      content="–í—ã–∂–∏–≤–∞–π—Ç–µ –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∑–æ–º–±–∏-–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å–µ. –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –∏ –æ–ø–∞—Å–Ω—ã–µ –∞—Ç–∞–∫–∏ –∑–æ–º–±–∏. –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∏–≥—Ä–∞." />
    <meta
      name="keywords"
      content="–∑–æ–º–±–∏, –≤—ã–∂–∏–≤–∞–Ω–∏–µ, –∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å, –≤–µ–±-–∏–≥—Ä–∞, —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞, –±—Ä–∞—É–∑–µ—Ä, –±–µ—Å–ø–ª–∞—Ç–Ω–æ" />
    <meta name="author" content="Itagi" />
    <meta name="language" content="ru" />
    <meta name="theme-color" content="#191d22" />
    <link rel="canonical" href="https://emfls.github.io/ru/game/ZombieSurvival/" />
    <link rel="icon" href="https://emfls.github.io/icon-192.png" />
    <!-- Open Graph (Facebook, Kakao, etc) -->
    <meta property="og:title" content="–í—ã–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–∏ –∑–æ–º–±–∏ ‚Äì –¢–µ–∫—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞" />
    <meta
      property="og:description"
      content="–°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤—ã–∂–∏—Ç—å –≤ –∑–æ–º–±–∏-–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å–µ? –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏, –∏—Å—Å–ª–µ–¥—É–π—Ç–µ –∏ –∏–∑–±–µ–≥–∞–π—Ç–µ —Å–º–µ—Ä—Ç–∏. –ò–≥—Ä–∞ 100% –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://emfls.github.io/ru/game/ZombieSurvival/" />
    <meta property="og:image" content="https://emfls.github.io/thumbnail.png" />
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="–í—ã–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–∏ –∑–æ–º–±–∏ ‚Äì –¢–µ–∫—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞" />
    <meta
      name="twitter:description"
      content="–í—ã–∂–∏–≤–∞–π—Ç–µ –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ –≤ –∑–æ–º–±–∏-–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å–µ. –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∏–≥—Ä–∞, –±–µ–∑ –∑–∞–≥—Ä—É–∑–æ–∫." />
    <meta name="twitter:image" content="https://emfls.github.io/thumbnail.png" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="container">
      <h2>üßü –í—ã–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–∏ –∑–æ–º–±–∏</h2>
      <div id="status"></div>
      <div id="inventory"></div>
      <div id="log"></div>
      <div id="actions"></div>
    </div>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ -->
    <div id="itemDescBg">
      <div id="itemDescModal">
        <button class="close" onclick="closeDesc()">&times;</button>
        <div id="itemDescText"></div>
      </div>
    </div>
    <button
      style="
        background: white;
        padding: 19px 20px 20px 20px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        text-align: center;
        width: 90%;
        max-width: 400px;
        position: fixed;
        color: black;
        font-weight: bold;
        bottom: 50px;
      "
      onclick="window.location.href='/'">
      üìÇ –î—Ä—É–≥–∏–µ –∏–≥—Ä—ã
    </button>
    <script>
      // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–∫–ª—é—á, —Ç–∏–ø, —ç—Ñ—Ñ–µ–∫—Ç, —Ç–µ–∫—Å—Ç, –æ–ø–∏—Å–∞–Ω–∏–µ)
      const ITEM_LIST = [
        {
          key: "üçû–•–ª–µ–±",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 22, 0, 100);
          },
          text: "(-22 –ì–æ–ª–æ–¥)",
          desc: "–•–ª–µ–±. –°–∏–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞."
        },
        {
          key: "üíß–í–æ–¥–∞",
          type: "drink",
          effect: () => {
            state.hunger = clamp(state.hunger - 13, 0, 100);
          },
          text: "(-13 –ì–æ–ª–æ–¥)",
          desc: "–í–æ–¥–∞. –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞."
        },
        {
          key: "ü•™–°—ç–Ω–¥–≤–∏—á",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 35, 0, 100);
          },
          text: "(-35 –ì–æ–ª–æ–¥)",
          desc: "–°—ç–Ω–¥–≤–∏—á. –°–∏–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞."
        },
        {
          key: "ü•§–ì–∞–∑–∏—Ä–æ–≤–∫–∞",
          type: "drink",
          effect: () => {
            state.mental = clamp(state.mental + 7, 0, 100);
            state.hunger = clamp(state.hunger - 7, 0, 100);
          },
          text: "(+7 –ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ, -7 –ì–æ–ª–æ–¥)",
          desc: "–ì–∞–∑–∏—Ä–æ–≤–∫–∞. –ù–µ–º–Ω–æ–≥–æ —É–ª—É—á—à–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –≥–æ–ª–æ–¥."
        },
        {
          key: "üç´–ó–∞–∫—É—Å–∫–∞",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 12, 0, 100);
          },
          text: "(-12 –ì–æ–ª–æ–¥)",
          desc: "–ó–∞–∫—É—Å–∫–∞. –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞."
        },
        {
          key: "üçè–Ø–±–ª–æ–∫–æ",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 11, 0, 100);
          },
          text: "(-11 –ì–æ–ª–æ–¥)",
          desc: "–Ø–±–ª–æ–∫–æ. –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞."
        },
        {
          key: "üíä–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ",
          type: "heal",
          effect: () => {
            state.mental = clamp(state.mental + 22, 0, 100);
          },
          text: "(+22 –ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ)",
          desc: "–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ. –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ."
        },
        {
          key: "üß∞–ë–∏–Ω—Ç",
          type: "heal",
          effect: () => {
            state.hp = clamp(state.hp + 17, 0, 100);
          },
          text: "(+17 HP)",
          desc: "–ë–∏–Ω—Ç. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ."
        },
        {
          key: "üî™–ù–æ–∂",
          type: "weapon",
          effect: () => {},
          text: "–û—Ä—É–∂–∏–µ",
          desc: "–ù–æ–∂. –£–º–µ–Ω—å—à–∞–µ—Ç —É—Ä–æ–Ω –ø—Ä–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å –∑–æ–º–±–∏."
        },
        {
          key: "üîß–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á",
          type: "weapon",
          effect: () => {},
          text: "–û—Ä—É–∂–∏–µ",
          desc: "–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á. –£–º–µ–Ω—å—à–∞–µ—Ç —É—Ä–æ–Ω –ø—Ä–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å –∑–æ–º–±–∏."
        },
        {
          key: "üî¶–§–æ–Ω–∞—Ä–∏–∫",
          type: "tool",
          effect: () => {
            state.mental = clamp(state.mental + 5, 0, 100);
          },
          text: "(+5 –ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ)",
          desc: "–§–æ–Ω–∞—Ä–∏–∫. –ù–µ–º–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ."
        },
        { key: "ü™ô–ú–æ–Ω–µ—Ç–∞", type: "misc", effect: () => {}, text: "–ü—Ä–æ—Å—Ç–æ –º–æ–Ω–µ—Ç–∞", desc: "–ú–æ–Ω–µ—Ç–∞. –ü–æ–∫–∞ —á—Ç–æ –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞." },
        {
          key: "üì±–¢–µ–ª–µ—Ñ–æ–Ω",
          type: "misc",
          effect: () => {},
          text: "–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç",
          desc: "–¢–µ–ª–µ—Ñ–æ–Ω. –ë–∞—Ç–∞—Ä–µ—è —Ä–∞–∑—Ä—è–∂–µ–Ω–∞."
        }
      ];

      // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–π (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–æ–º–±–∏)
      const LOC_POOL = [
        { name: "üè† –î–æ–º", item: ["üçû–•–ª–µ–±", "ü•§–ì–∞–∑–∏—Ä–æ–≤–∫–∞", "üì±–¢–µ–ª–µ—Ñ–æ–Ω", "üî™–ù–æ–∂"], zombie: 18 },
        { name: "üè™ –ú–∞–≥–∞–∑–∏–Ω", item: ["ü•™–°—ç–Ω–¥–≤–∏—á", "üíß–í–æ–¥–∞", "üç´–ó–∞–∫—É—Å–∫–∞", "üíä–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ", "ü™ô–ú–æ–Ω–µ—Ç–∞"], zombie: 22 },
        { name: "üöó –ü–µ—Ä–µ—É–ª–æ–∫", item: ["üîß–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á", "üß∞–ë–∏–Ω—Ç", "üíß–í–æ–¥–∞", "üçè–Ø–±–ª–æ–∫–æ"], zombie: 33 },
        { name: "üè¢ –û—Ñ–∏—Å", item: ["üç´–ó–∞–∫—É—Å–∫–∞", "üíä–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ", "üî¶–§–æ–Ω–∞—Ä–∏–∫"], zombie: 15 },
        { name: "üèû –ü–∞—Ä–∫", item: ["üçè–Ø–±–ª–æ–∫–æ", "üíß–í–æ–¥–∞", "ü™ô–ú–æ–Ω–µ—Ç–∞"], zombie: 8 },
        { name: "üè´ –®–∫–æ–ª–∞", item: ["üçû–•–ª–µ–±", "üç´–ó–∞–∫—É—Å–∫–∞", "üì±–¢–µ–ª–µ—Ñ–æ–Ω"], zombie: 17 },
        { name: "üèö –†—É–∏–Ω—ã", item: ["üî™–ù–æ–∂", "üß∞–ë–∏–Ω—Ç"], zombie: 28 },
        { name: "üè• –ë–æ–ª—å–Ω–∏—Ü–∞", item: ["üíä–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ", "üß∞–ë–∏–Ω—Ç", "üî¶–§–æ–Ω–∞—Ä–∏–∫"], zombie: 18 },
        { name: "üè≠ –ó–∞–≤–æ–¥", item: ["üîß–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á", "üî¶–§–æ–Ω–∞—Ä–∏–∫"], zombie: 26 },
        { name: "üöâ –ú–µ—Ç—Ä–æ", item: ["üç´–ó–∞–∫—É—Å–∫–∞", "üì±–¢–µ–ª–µ—Ñ–æ–Ω"], zombie: 20 },
        { name: "üçî –†–µ—Å—Ç–æ—Ä–∞–Ω", item: ["üçû–•–ª–µ–±", "ü•™–°—ç–Ω–¥–≤–∏—á", "ü•§–ì–∞–∑–∏—Ä–æ–≤–∫–∞"], zombie: 19 },
        { name: "‚õΩ –ó–∞–ø—Ä–∞–≤–∫–∞", item: ["üîß–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á", "üíß–í–æ–¥–∞", "ü™ô–ú–æ–Ω–µ—Ç–∞"], zombie: 23 },
        { name: "üõí –°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç", item: ["üçû–•–ª–µ–±", "üçè–Ø–±–ª–æ–∫–æ", "ü•§–ì–∞–∑–∏—Ä–æ–≤–∫–∞", "üíß–í–æ–¥–∞"], zombie: 21 },
        { name: "üè® –û—Ç–µ–ª—å", item: ["üç´–ó–∞–∫—É—Å–∫–∞", "üíß–í–æ–¥–∞", "üß∞–ë–∏–Ω—Ç"], zombie: 18 },
        { name: "üßë‚Äçüîß –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è", item: ["üîß–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á", "ü™ô–ú–æ–Ω–µ—Ç–∞"], zombie: 28 }
      ];

      // –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç 4 –∏–ª–∏ 5 –ª–æ–∫–∞—Ü–∏–π
      function randomPlaces(n = 4) {
        let arr = LOC_POOL.slice();
        arr.sort(() => Math.random() - 0.5);
        return arr.slice(0, n + Math.floor(Math.random() * 2)); // 4 –∏–ª–∏ 5 –º–µ—Å—Ç
      }

      // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
      let state = {
        hp: 100,
        hunger: 35,
        mental: 55,
        day: 1,
        items: { "üçû–•–ª–µ–±": 5, "üíß–í–æ–¥–∞": 5, "üíä–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ": 5 },
        alive: true,
        searching: false,
        locations: randomPlaces(),
        died: false
      };

      // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –≤ —Å—Ç—Ä–æ–∫—É
      function invStr(obj) {
        let out = [];
        for (let k of Object.keys(obj)) if (obj[k] > 0) out.push(`${k} x${obj[k]}`);
        return out.length ? out.join(", ") : "–ü—É—Å—Ç–æ";
      }
      function clamp(val, min, max) {
        return Math.max(min, Math.min(max, val));
      }

      const logEl = document.getElementById("log");
      const statusEl = document.getElementById("status");
      const inventoryEl = document.getElementById("inventory");
      const actionsEl = document.getElementById("actions");
      const itemDescBg = document.getElementById("itemDescBg");
      const itemDescText = document.getElementById("itemDescText");

      function render() {
        statusEl.innerHTML = `<div style="font-size:1.09em;"><b>–î–µ–Ω—å ${state.day}</b></div>
         <div id="barGroup">
           <div class="bar"><span class="fill-hp" style="width:${state.hp}%"></span></div>
           <div class="bar"><span class="fill-hunger" style="width:${clamp(100 - state.hunger, 0, 100)}%"></span></div>
           <div class="bar"><span class="fill-mental" style="width:${state.mental}%"></span></div>
         </div>
         <div style="font-size:0.97em; margin:0 2px 0 2px;">
            ‚ù§Ô∏èHP ${state.hp} &nbsp;|&nbsp; üçû–ì–æ–ª–æ–¥ ${state.hunger} &nbsp;|&nbsp; üß†–ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ ${state.mental}
         </div>`;
        inventoryEl.innerHTML = `<b>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:</b> ${invStr(state.items)}`;
        if (!state.alive) {
          actionsEl.innerHTML = `<button class="actBtn" onclick="restart()">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>`;
        } else if (state.searching) {
          actionsEl.innerHTML =
            state.locations
              .map((loc, i) => `<button class="locBtn" onclick="searchPlace(${i})">${loc.name}</button>`)
              .join("") + `<button class="actBtn" onclick="cancelSearch()">–û—Ç–º–µ–Ω–∞</button>`;
        } else {
          actionsEl.innerHTML = `
          <button class="actBtn" onclick="startSearch()" ${state.locations.length == 0 ? 'disabled style="opacity:0.5;"' : ""}>üîç –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å</button>
          <button class="actBtn" onclick="rest()">üõè –û—Ç–¥–æ—Ö–Ω—É—Ç—å</button>
          <button class="actBtn" onclick="move()">‚û°Ô∏è –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è</button>
          <button class="actBtn" onclick="useItem()">üéí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç</button>
        `;
        }
      }

      function log(msg, type = "") {
        let d = document.createElement("div");
        d.innerHTML = msg;
        if (type) d.classList.add(type);
        logEl.appendChild(d);
        logEl.scrollTop = logEl.scrollHeight;
        if (type) setTimeout(() => d.classList.remove(type), 400);
      }

      function nextDay() {
        state.day++;
        state.hunger += 10;
        state.mental -= 4;
        if (state.hunger >= 95) {
          state.hp -= 15;
          log("üòñ <b>–ì–æ–ª–æ–¥–∞–Ω–∏–µ!</b> (-15 HP)", "event");
        }
        if (state.hp <= 0 || state.mental <= 0) {
          state.alive = false;
          log(`<b>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞: –≤—ã –≤—ã–∂–∏–ª–∏ <span style="color:#e9f85b">${state.day - 1}</span> –¥–Ω–µ–π.</b>`, "event");
        }
        render();
      }

      // ---- –î–µ–π—Å—Ç–≤–∏—è ----
      function startSearch() {
        state.searching = true;
        render();
        log("–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è...");
      }
      function cancelSearch() {
        state.searching = false;
        render();
      }
      function searchPlace(idx) {
        let loc = state.locations[idx];
        log(`üîç –ò—Å—Å–ª–µ–¥—É—é <b>${loc.name}</b>...`);
        // 52% –Ω–∞–π—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–æ–º–±–∏ loc.zombie%
        if (Math.random() * 100 < 52) {
          let found = loc.item[Math.floor(Math.random() * loc.item.length)];
          state.items[found] = (state.items[found] || 0) + 1;
          let itemInfo = ITEM_LIST.find((x) => x.key === found);
          log(
            `<span class="item-anim">‚ú® –ù–∞–π–¥–µ–Ω–æ: <b>${found}</b> <span style="font-size:0.88em;color:#ffd;">${itemInfo ? itemInfo.text : ""}</span></span>`,
            "event"
          );
        } else if (Math.random() * 100 < loc.zombie) {
          encounterZombie(loc.name);
          if (!state.alive) return;
        } else {
          log("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.");
        }
        // –£–¥–∞–ª–∏—Ç—å –º–µ—Å—Ç–æ
        state.locations.splice(idx, 1);
        state.searching = false;
        nextDay();
      }
      function rest() {
        log("üõè –í—ã –æ—Ç–¥–æ—Ö–Ω—É–ª–∏. +13 üß†–ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ, +12 ‚ù§Ô∏èHP, +9 –ì–æ–ª–æ–¥");
        state.mental = clamp(state.mental + 13, 0, 100);
        state.hp = clamp(state.hp + 12, 0, 100);
        state.hunger += 9;
        nextDay();
      }
      function move() {
        log("‚û°Ô∏è –í—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏—Å—å –≤ –Ω–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å. -2 üß†–ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ");
        state.mental -= 2;
        state.locations = randomPlaces();
        if (Math.random() * 100 < 22) {
          encounterZombie("–≥–æ—Ä–æ–¥");
          if (!state.alive) return;
        }
        nextDay();
      }
      function useItem() {
        let keys = Object.keys(state.items).filter((k) => state.items[k] > 0);
        if (!keys.length) {
          log("üéí –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.");
          return;
        }
        actionsEl.innerHTML =
          keys
            .map((item, i) => {
              let info = ITEM_LIST.find((x) => x.key === item);
              return `<button class="locBtn" onclick="chooseItem('${item}')">${item} x${state.items[item]} <span style="font-size:0.8em;color:#ffc;">${info ? info.text : ""}</span></button>`;
            })
            .join("") + `<button class="actBtn" onclick="render()">–û—Ç–º–µ–Ω–∞</button>`;
      }
      function chooseItem(item) {
        state.items[item]--;
        let info = ITEM_LIST.find((x) => x.key === item);
        if (info) info.effect();
        log(
          `<span class="item-anim">${item} –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω. <span style="font-size:0.9em;color:#ffd;">${info ? info.text : ""}</span></span>`
        );
        render();
      }
      function encounterZombie(place) {
        let baseHp = 14 + Math.floor(Math.random() * 12); // 14‚Äì25
        let baseMental = 8 + Math.floor(Math.random() * 8); // 8‚Äì15
        let weapon = Object.keys(state.items).find(
          (x) => (x.includes("–ù–æ–∂") || x.includes("–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á")) && state.items[x] > 0
        );
        let hpLoss = weapon ? Math.floor(baseHp * 0.5) : baseHp;
        let mLoss = weapon ? Math.floor(baseMental * 0.7) : baseMental;
        if (weapon) {
          log(
            `<span class="zombie-anim">üßü <b>–í—Å—Ç—Ä–µ—á–∞ —Å –∑–æ–º–±–∏!</b> (${place})<br>–í—ã –æ—Ç–æ–≥–Ω–∞–ª–∏ –µ–≥–æ —Å –ø–æ–º–æ—â—å—é ${weapon}. <span style="color:#fd7;">(-${hpLoss} HP, -${mLoss} –ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ)</span></span>`,
            "event"
          );
        } else {
          log(
            `<span class="zombie-anim">üßü <b>–í—Å—Ç—Ä–µ—á–∞ —Å –∑–æ–º–±–∏!</b> (${place})<br>–í—ã –ø–æ–ª—É—á–∏–ª–∏ —Ä–∞–Ω–µ–Ω–∏—è. <span style="color:#fd7;">(-${hpLoss} HP, -${mLoss} –ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ)</span></span>`,
            "event"
          );
        }
        state.hp -= hpLoss;
        state.mental -= mLoss;
        if (state.hp <= 0 || state.mental <= 0) {
          state.alive = false;
          log(`<b>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞: –≤—ã –≤—ã–∂–∏–ª–∏ <span style="color:#e9f85b">${state.day}</span> –¥–Ω–µ–π.</b>`, "event");
          render();
        }
      }
      // –ü–æ–∫–∞–∑–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
      function showDesc(item) {
        let info = ITEM_LIST.find((x) => x.key === item);
        if (!info) return;
        itemDescText.innerHTML = `<b>${item}</b><br><span style="font-size:1.07em;color:#fe9;">${info.desc || ""}</span><br><span style="color:#ffec;">–≠—Ñ—Ñ–µ–∫—Ç: ${info.text || ""}</span>`;
        itemDescBg.style.display = "flex";
      }
      function closeDesc() {
        itemDescBg.style.display = "none";
      }

      // -------- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è --------
      render();
      log("–ù–æ–≤—ã–π –≤—ã–∂–∏–≤—à–∏–π –ø—Ä–∏–±—ã–ª –≤ –≥–æ—Ä–æ–¥...");
      function restart() {
        state = {
          hp: 100,
          hunger: 35,
          mental: 55,
          day: 1,
          items: { "üçû–•–ª–µ–±": 5, "üíß–í–æ–¥–∞": 5, "üíä–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ": 5 },
          alive: true,
          searching: false,
          locations: randomPlaces(),
          died: false
        };
        logEl.innerHTML = "";
        render();
        log("–ù–æ–≤—ã–π –≤—ã–∂–∏–≤—à–∏–π –ø—Ä–∏–±—ã–ª –≤ –≥–æ—Ä–æ–¥...");
      }
    </script>
    <section
      style="
        max-width: 320px;
        width: 100%;
        margin: 48px auto 24px auto;
        margin-top: 300px;
        background: #1e1e1e;
        border-radius: 18px;
        box-shadow: 0 6px 24px #1236;
        padding: 20px;
        font-family: Arial, sans-serif;
      ">
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üßü –ß—Ç–æ —Ç–∞–∫–æ–µ –í—ã–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–∏ –∑–æ–º–±–∏?</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          –í—ã–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–∏ –∑–æ–º–±–∏ - —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞ –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã –¥–æ–ª–∂–Ω—ã —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º –≥–æ–ª–æ–¥–æ–º, –ø—Å–∏—Ö–∏—á–µ—Å–∫–∏–º –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –∑–¥–æ—Ä–æ–≤—å–µ–º –≤–æ –≤—Ä–µ–º—è –∑–æ–º–±–∏-–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å–∞. –ò—Å—Å–ª–µ–¥—É–π—Ç–µ –º–µ—Å—Ç–∞, —Å–æ–±–∏—Ä–∞–π—Ç–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –≤—ã–∂–∏–≤–∞–π—Ç–µ –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ.
        </p>
      </div>
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üó∫Ô∏è –ö–∞–∫ –∏–≥—Ä–∞—Ç—å?</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É: "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å", "–û—Ç–¥–æ—Ö–Ω—É—Ç—å", "–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è" –∏–ª–∏ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç". –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –¥–∞—Ç—å –≤–∞–º –ø—Ä–µ–¥–º–µ—Ç—ã –∏–ª–∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤—Å—Ç—Ä–µ—á–µ —Å –∑–æ–º–±–∏.
        </p>
      </div>
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üéí –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–µ–¥–º–µ—Ç—ã?</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          –ü—Ä–µ–¥–º–µ—Ç—ã –º–æ–≥—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ, —É–º–µ–Ω—å—à–∞—Ç—å –≥–æ–ª–æ–¥ –∏–ª–∏ —É–ª—É—á—à–∞—Ç—å –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ. –û—Ä—É–∂–∏–µ, —Ç–∞–∫–æ–µ –∫–∞–∫ –Ω–æ–∂ –∏–ª–∏ –≥–∞–µ—á–Ω—ã–π –∫–ª—é—á, —É–º–µ–Ω—å—à–∞–µ—Ç —É—Ä–æ–Ω –æ—Ç –∑–æ–º–±–∏.
        </p>
      </div>
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üß† –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 0?</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          –ï—Å–ª–∏ –≤–∞—à–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∏–ª–∏ –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 0, –∏–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è. –ì–æ–ª–æ–¥ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –∏ –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –≤—ã —Ç–µ—Ä—è–µ—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ.
        </p>
      </div>
      <div style="margin-bottom: 0">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üîÅ –ú–æ–≥—É –ª–∏ —è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏?</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          –î–∞! –ü–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å". –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–∂–∏—Ç—å –¥–æ–ª—å—à–µ, –ø—Ä–∏–Ω–∏–º–∞—è –ª—É—á—à–∏–µ —Ä–µ—à–µ–Ω–∏—è.
        </p>
      </div>
    </section>
  </body>
</html>
