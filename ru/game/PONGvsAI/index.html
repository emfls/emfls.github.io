<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="–ò–≥—Ä–∞–π –≤ –ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ –ò–ò! –ë—Ä–æ—Å—å –≤—ã–∑–æ–≤ –ò–ò –≤ —Ä–µ—Ç—Ä–æ —Å—Ç–∏–ª–µ –∏ –Ω–∞–±–µ—Ä–∏ 10 –æ—á–∫–æ–≤ –ø–µ—Ä–≤—ã–º. –ò–≥—Ä–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –∏ –ü–ö." />
        <meta
            name="keywords"
            content="–ü–û–ù–ì, –ü–û–ù–ì –ò–ò, –≤–µ–± –∏–≥—Ä–∞ –ü–û–ù–ì, –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∏–≥—Ä–∞, –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∞—Ä–∫–∞–¥, –ò–ò –ü–û–ù–ì, –ø–∏–Ω–≥ –ø–æ–Ω–≥, –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π —Ç–µ–Ω–Ω–∏—Å, –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∏–≥—Ä–∞, –≤–µ–± –∏–≥—Ä–∞, –º–æ–±–∏–ª—å–Ω–∞—è, –∏–≥—Ä–∞—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –∞—Ä–∫–∞–¥" />
        <meta name="author" content="Itagi" />
        <meta name="robots" content="index, follow" />

        <link rel="canonical" href="https://emfls.github.io/ru/game/PONGvsAI" />

        <meta property="og:title" content="–ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ –ò–ò ‚Äì –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –≤–µ–± –∏–≥—Ä–∞ –ü–û–ù–ì" />
        <meta
            property="og:description"
            content="–ë—Ä–æ—Å—å –≤—ã–∑–æ–≤ –ò–ò –∏ –Ω–∞–±–µ—Ä–∏ 10 –æ—á–∫–æ–≤ –ø–µ—Ä–≤—ã–º! –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è —Ä–µ—Ç—Ä–æ –ü–û–ù–ì –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ë–µ–∑ –∑–∞–≥—Ä—É–∑–æ–∫, –∏–≥—Ä–∞–π –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!" />
        <meta property="og:image" content="https://emfls.github.io/thumbnail.png" />
        <meta property="og:url" content="https://emfls.github.io/ru/game/PONGvsAI" />
        <meta property="og:type" content="website" />

        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="–ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ –ò–ò ‚Äì –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –≤–µ–± –∏–≥—Ä–∞ –ü–û–ù–ì" />
        <meta name="twitter:description" content="–ò–≥—Ä–∞–π –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ —É–º–Ω–æ–≥–æ –ò–ò. –ò–≥—Ä–∞–π —Å–µ–π—á–∞—Å –∏ –¥–µ–ª–∏—Å—å —Å–≤–æ–∏–º —Å—á—ë—Ç–æ–º!" />
        <meta name="twitter:image" content="https://emfls.github.io/thumbnail.png" />

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-QP5Q67GE5B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-QP5Q67GE5B");
        </script>
        <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8830524482034754"
            crossorigin="anonymous"></script>
        <title>–ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ –ò–ò</title>
        <link rel="stylesheet" href="style.css" />
    </head>

    <body>
        <div id="container">
            <div id="gameTitle">–ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ –ò–ò</div>
            <div id="desc">–ù–∞–±–µ—Ä–∏ 10 –æ—á–∫–æ–≤ –ø–µ—Ä–≤—ã–º, —á—Ç–æ–±—ã –ø–æ–±–µ–¥–∏—Ç—å!</div>
            <div id="scoreBoard"></div>
            <canvas id="pong" width="400" height="260"></canvas>
            <button id="startBtn" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            <div id="winMsg"></div>
            <div class="gameOverBtns" style="display: none">
                <button onclick="restartGame()">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button onclick="shareScore()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            </div>
            <div class="desc-ctrl">
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: W/S (—Ç—ã, –ª–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞) „Éª –ò–ò —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–æ–π —Ä–∞–∫–µ—Ç–∫–æ–π<br />–ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π –ª–µ–≤—É—é —á–∞—Å—Ç—å.
            </div>
        </div>
        <button id="otherGames" onclick="window.location.href='../'">–î—Ä—É–≥–∏–µ –∏–≥—Ä—ã</button>
        <script>
            // --- –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö ---
            const canvas = document.getElementById("pong");
            const ctx = canvas.getContext("2d");
            const scoreBoard = document.getElementById("scoreBoard");
            const startBtn = document.getElementById("startBtn");
            const winMsgDiv = document.getElementById("winMsg");
            const gameOverBtns = document.querySelector(".gameOverBtns");
            const maxScore = 10;

            const paddleWidth = 12,
                paddleHeight = 56,
                ballSize = 14;
            const paddleSpeed = 6,
                ballSpeedStart = 2.7;
            let leftY, rightY, ballX, ballY, ballVelX, ballVelY;
            let leftScore = 0,
                rightScore = 0,
                gameRunning = false,
                inGame = false;
            let leftMove = 0;
            let aiLevel = 0.15;
            let rafId;

            // –°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–∏—Ü –¥–ª—è –≤—Å–ø—ã—à–µ–∫
            let particles = [];

            function spawnSpark(x, y, color = "#ffe287", count = 15) {
                for (let i = 0; i < count; i++) {
                    let angle = Math.random() * 2 * Math.PI;
                    let speed = 2.3 + Math.random() * 2.2;
                    particles.push({
                        x,
                        y,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        alpha: 1.1,
                        life: 12 + Math.random() * 5,
                        color,
                    });
                }
            }

            function updateParticles() {
                for (let i = particles.length - 1; i >= 0; i--) {
                    let p = particles[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vx *= 0.91;
                    p.vy *= 0.91;
                    p.alpha -= 0.06;
                    p.life--;
                    if (p.life <= 0 || p.alpha <= 0) particles.splice(i, 1);
                }
            }

            function drawParticles() {
                for (const p of particles) {
                    ctx.globalAlpha = Math.max(p.alpha, 0);
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2.1, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.fill();
                }
                ctx.globalAlpha = 1;
            }

            function resetVars() {
                leftY = (canvas.height - paddleHeight) / 2;
                rightY = (canvas.height - paddleHeight) / 2;
                ballX = (canvas.width - ballSize) / 2;
                ballY = (canvas.height - ballSize) / 2;
                let angle = ((Math.random() - 0.5) * Math.PI) / 3;
                let dir = Math.random() > 0.5 ? 1 : -1;
                ballVelX = ballSpeedStart * dir * Math.cos(angle);
                ballVelY = ballSpeedStart * Math.sin(angle);
            }

            function updateScore() {
                scoreBoard.textContent = `${leftScore} : ${rightScore}`;
            }

            function drawPaddle(x, y) {
                ctx.fillStyle = "#fffffe";
                ctx.fillRect(x, y, paddleWidth, paddleHeight);
            }

            function drawBall(x, y) {
                ctx.beginPath();
                ctx.arc(x + ballSize / 2, y + ballSize / 2, ballSize / 2, 0, Math.PI * 2);
                ctx.fillStyle = "#f9bc60";
                ctx.fill();
            }

            function drawCenterLine() {
                ctx.save();
                ctx.setLineDash([9, 11]);
                ctx.strokeStyle = "#393d42";
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 0);
                ctx.lineTo(canvas.width / 2, canvas.height);
                ctx.stroke();
                ctx.restore();
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawCenterLine();
                drawPaddle(10, leftY);
                drawPaddle(canvas.width - paddleWidth - 10, rightY);
                drawBall(ballX, ballY);
                drawParticles();
            }

            function stepGame() {
                leftY += leftMove * paddleSpeed;
                leftY = Math.max(0, Math.min(canvas.height - paddleHeight, leftY));
                // –ò–ò (–ø—Ä–∞–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)
                let targetY = ballY - (paddleHeight - ballSize) / 2;
                rightY += (targetY - rightY) * aiLevel;
                rightY = Math.max(0, Math.min(canvas.height - paddleHeight, rightY));
                // –î–≤–∏–∂–µ–Ω–∏–µ –º—è—á–∞
                ballX += ballVelX;
                ballY += ballVelY;
                // –û—Ç—Å–∫–æ–∫ –æ—Ç —Å—Ç–µ–Ω
                if (ballY <= 0 || ballY + ballSize >= canvas.height) ballVelY *= -1;
                // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —Ä–∞–∫–µ—Ç–∫–∞–º–∏
                let sparkAt = null;
                if (ballX <= 10 + paddleWidth && ballY + ballSize >= leftY && ballY <= leftY + paddleHeight) {
                    ballX = 10 + paddleWidth;
                    ballVelX *= -1.07;
                    let hit = (ballY + ballSize / 2 - (leftY + paddleHeight / 2)) / (paddleHeight / 2);
                    ballVelY += hit * 2.0;
                    sparkAt = { x: ballX + ballSize / 2, y: ballY + ballSize / 2, color: "#ffe287" };
                }
                if (
                    ballX + ballSize >= canvas.width - 10 - paddleWidth &&
                    ballY + ballSize >= rightY &&
                    ballY <= rightY + paddleHeight
                ) {
                    ballX = canvas.width - 10 - paddleWidth - ballSize;
                    ballVelX *= -1.07;
                    let hit = (ballY + ballSize / 2 - (rightY + paddleHeight / 2)) / (paddleHeight / 2);
                    ballVelY += hit * 2.0;
                    sparkAt = { x: ballX + ballSize / 2, y: ballY + ballSize / 2, color: "#86f4ff" };
                }
                if (sparkAt) spawnSpark(sparkAt.x, sparkAt.y, sparkAt.color);

                // –°—á—ë—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
                if (ballX < 0) {
                    rightScore++;
                    updateScore();
                    if (rightScore >= maxScore) {
                        endGame(false);
                        return;
                    }
                    resetVars();
                }
                if (ballX > canvas.width) {
                    leftScore++;
                    updateScore();
                    if (leftScore >= maxScore) {
                        endGame(true);
                        return;
                    }
                    resetVars();
                }
                updateParticles();
                draw();
                rafId = requestAnimationFrame(stepGame);
            }

            function startGame() {
                leftScore = 0;
                rightScore = 0;
                updateScore();
                resetVars();
                draw();
                startBtn.style.display = "none";
                winMsgDiv.textContent = "";
                gameOverBtns.style.display = "none";
                inGame = true;
                gameRunning = true;
                rafId = requestAnimationFrame(stepGame);
            }

            function restartGame() {
                leftScore = 0;
                rightScore = 0;
                updateScore();
                resetVars();
                draw();
                winMsgDiv.textContent = "";
                gameOverBtns.style.display = "none";
                inGame = true;
                gameRunning = true;
                rafId = requestAnimationFrame(stepGame);
            }

            function endGame(playerWin) {
                gameRunning = false;
                inGame = false;
                cancelAnimationFrame(rafId);
                winMsgDiv.textContent = playerWin ? "–¢—ã –ø–æ–±–µ–¥–∏–ª! üéâ" : "–ò–ò –ø–æ–±–µ–¥–∏–ª! ü§ñ";
                gameOverBtns.style.display = "block";
            }

            // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è
            function shareScore() {
                let text = `[–ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ –ò–ò]\n${winMsgDiv.textContent}\n–¢–≤–æ–π —Å—á—ë—Ç: ${leftScore}, –ò–ò: ${rightScore}\n\n–ò–≥—Ä–∞–π –∑–¥–µ—Å—å!: ${window.location.href}`;
                if (navigator.share) {
                    navigator.share({ title: "–ü–û–ù–ì –ø—Ä–æ—Ç–∏–≤ –ò–ò", text })
                        .catch(() => {
                            navigator.clipboard.writeText(text);
                            alert("–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!\n\n" + text);
                        });
                } else {
                    navigator.clipboard.writeText(text).then(() => {
                        alert("–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!\n\n" + text);
                    });
                }
            }

            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
            document.addEventListener("keydown", (e) => {
                if (!inGame) return;
                if (e.key === "w" || e.key === "W") leftMove = -1;
                if (e.key === "s" || e.key === "S") leftMove = 1;
            });
            document.addEventListener("keyup", (e) => {
                if (!inGame) return;
                if (e.key === "w" || e.key === "W") leftMove = 0;
                if (e.key === "s" || e.key === "S") leftMove = 0;
            });

            // –°–µ–Ω—Å–æ—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º (—Ç–æ–ª—å–∫–æ –ª–µ–≤–∞—è —Ä–∞–∫–µ—Ç–∫–∞)
            canvas.addEventListener("touchstart", function (e) {
                if (!inGame) return;
                const rect = canvas.getBoundingClientRect();
                for (const touch of e.touches) {
                    if (touch.clientX - rect.left < canvas.width / 2) {
                        let y = touch.clientY - rect.top - paddleHeight / 2;
                        y = Math.max(0, Math.min(canvas.height - paddleHeight, y));
                        leftY = y;
                    }
                }
            });
            canvas.addEventListener("touchmove", function (e) {
                if (!inGame) return;
                const rect = canvas.getBoundingClientRect();
                for (const touch of e.touches) {
                    if (touch.clientX - rect.left < canvas.width / 2) {
                        let y = touch.clientY - rect.top - paddleHeight / 2;
                        y = Math.max(0, Math.min(canvas.height - paddleHeight, y));
                        leftY = y;
                    }
                }
                e.preventDefault();
            });
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
            document.body.addEventListener(
                "touchmove",
                function (e) {
                    if (inGame) e.preventDefault();
                },
                {
                    passive: false,
                }
            );

            // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            updateScore();
            resetVars();
            draw();
            startBtn.style.display = "block";
            winMsgDiv.textContent = "";
            gameOverBtns.style.display = "none";
        </script>
        <section
            style="
                max-width: 320px;
                width: 100%;
                margin: 48px auto 24px auto;
                font-family: 'Arial', sans-serif;
                font-size: 14px;
                background: #1e1e1e;
                border-radius: 18px;
                box-shadow: 0 6px 24px #1236;
                padding: 20px;
                line-height: 1.6;
                color: #f0f0f0;
            ">
            <h2 style="font-size: 1.4rem; margin-bottom: 14px; color: #f9bc60">‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>

            <div style="margin-bottom: 12px">
                <strong>–í1. –ö–∞–∫ –∏–≥—Ä–∞—Ç—å?</strong><br />
                –û. –£–ø—Ä–∞–≤–ª—è–π –ª–µ–≤–æ–π —Ä–∞–∫–µ—Ç–∫–æ–π –∏ –Ω–∞–±–µ—Ä–∏ 10 –æ—á–∫–æ–≤ —Ä–∞–Ω—å—à–µ –ò–ò. –ò—Å–ø–æ–ª—å–∑—É–π W/S –Ω–∞ –ü–ö, –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π –ª–µ–≤—É—é —á–∞—Å—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º.
            </div>

            <div style="margin-bottom: 12px">
                <strong>–í2. –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–∫–µ—Ç–∫–æ–π?</strong><br />
                –û. –ù–∞ –ü–ö –Ω–∞–∂–∏–º–∞–π W (–≤–≤–µ—Ä—Ö) –∏ S (–≤–Ω–∏–∑). –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π –ª–µ–≤—É—é —Ä–∞–∫–µ—Ç–∫—É –ø–∞–ª—å—Ü–µ–º.
            </div>

            <div style="margin-bottom: 12px">
                <strong>–í3. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ò–ò?</strong><br />
                –û. –ò–ò —Å–ª–µ–¥—É–µ—Ç –∑–∞ –º—è—á–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–≤–∏–≥–∞–µ—Ç —Ä–∞–∫–µ—Ç–∫—É. –ü–æ –º–µ—Ä–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è –º—è—á–∞ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.
            </div>

            <div style="margin-bottom: 12px">
                <strong>–í4. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ø–æ–±–µ–∂–¥–∞–µ—Ç?</strong><br />
                –û. –ü–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ –∏–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–∏. –ó–∞—Ç–µ–º —Ç—ã –º–æ–∂–µ—à—å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É –∏–ª–∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º —Å—á—ë—Ç–æ–º.
            </div>

            <div style="margin-bottom: 12px">
                <strong>–í5. –ö–∞–∫ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º —Å—á—ë—Ç–æ–º?</strong><br />
                –û. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É <strong>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</strong>, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–º —Å –¥—Ä—É–∑—å—è–º–∏.
            </div>

            <div style="margin-bottom: 0">
                <strong>–í6. –°–æ–≤–º–µ—Å—Ç–∏–º–æ –ª–∏ —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏?</strong><br />
                –û. –î–∞, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö, —Ç–∞–∫ –∏ –¥–ª—è –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤.
            </div>
        </section>
    </body>
</html>
