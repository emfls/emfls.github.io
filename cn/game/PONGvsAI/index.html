<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="AIã¨å¯¾æˆ¦ã™ã‚‹PONGã‚²ãƒ¼ãƒ ï¼ãƒ¬ãƒˆãƒ­ã‚¹ã‚¿ã‚¤ãƒ«ã®PONGã§AIã«æŒ‘æˆ¦ã—ã€å…ˆã«10ç‚¹ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†ã€‚ãƒ¢ãƒã‚¤ãƒ«ã¨PCã§ç„¡æ–™ã§æ¥½ã—ã‚ã¾ã™ã€‚" />
        <meta
            name="keywords"
            content="PONG, PONG AI, PONG ã‚¦ã‚§ãƒ–ã‚²ãƒ¼ãƒ , ãƒ–ãƒ©ã‚¦ã‚¶ã‚²ãƒ¼ãƒ , ã‚¯ãƒ©ã‚·ãƒƒã‚¯ã‚¢ãƒ¼ã‚±ãƒ¼ãƒ‰, AI PONG, ãƒ”ãƒ³ãƒãƒ³, å“çƒ, ç„¡æ–™ã‚²ãƒ¼ãƒ , ã‚¦ã‚§ãƒ–ã‚²ãƒ¼ãƒ , ãƒ¢ãƒã‚¤ãƒ«ã‚²ãƒ¼ãƒ , å³ãƒ—ãƒ¬ã‚¤, ã‚¢ãƒ¼ã‚±ãƒ¼ãƒ‰" />
        <meta name="author" content="Itagi" />
        <meta name="robots" content="index, follow" />

        <link rel="canonical" href="https://emfls.github.io/cn/game/PONGvsAI" />

        <meta property="og:title" content="PONG vs AI â€“ ã‚¯ãƒ©ã‚·ãƒƒã‚¯PONGã‚¦ã‚§ãƒ–ã‚²ãƒ¼ãƒ " />
        <meta
            property="og:description"
            content="AIã«æŒ‘æˆ¦ã—ã¦å…ˆã«10ç‚¹ã‚’ç²å¾—ã—ã‚ˆã†ï¼ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ¬ãƒˆãƒ­ãªPONGã‚’æ¥½ã—ã‚“ã§ãã ã•ã„ã€‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸è¦ã§å³ãƒ—ãƒ¬ã‚¤ï¼" />
        <meta property="og:image" content="https://emfls.github.io/thumbnail.png" />
        <meta property="og:url" content="https://emfls.github.io/cn/game/PONGvsAI" />
        <meta property="og:type" content="website" />

        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="PONG vs AI â€“ ã‚¯ãƒ©ã‚·ãƒƒã‚¯PONGã‚¦ã‚§ãƒ–ã‚²ãƒ¼ãƒ " />
        <meta name="twitter:description" content="ã‚¹ãƒãƒ¼ãƒˆãªAIã¨å¯¾æˆ¦ã™ã‚‹ã‚¯ãƒ©ã‚·ãƒƒã‚¯PONGã€‚ä»Šã™ããƒ—ãƒ¬ã‚¤ã—ã¦ã‚¹ã‚³ã‚¢ã‚’å…±æœ‰ã—ã‚ˆã†ï¼" />
        <meta name="twitter:image" content="https://emfls.github.io/thumbnail.png" />

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-QP5Q67GE5B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-QP5Q67GE5B");
        </script>
        <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8830524482034754"
            crossorigin="anonymous"></script>
        <title>PONG vs AI</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                background: #151a23;
                min-height: 100vh;
                width: 100vw;
                overflow-x: hidden;
            }

            body {
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            #container {
                box-sizing: border-box;
                width: 100vw;
                max-width: 400px;
                margin: 0 auto;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 0 0 8px 0;
            }

            #gameTitle {
                color: #f9bc60;
                font-size: 2.1rem;
                margin-top: 2.1rem;
                margin-bottom: 0.5rem;
                text-align: center;
                font-weight: bold;
                letter-spacing: 2px;
                word-break: keep-all;
                white-space: nowrap;
            }

            #desc {
                color: #eee;
                text-align: center;
                margin-bottom: 1.1rem;
                font-size: 1.07rem;
                line-height: 1.5;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100vw;
            }

            #pong {
                background: #232946;
                border-radius: 20px;
                box-shadow: 0 8px 32px #0007;
                display: block;
                margin: 0 auto 14px auto;
                width: 100vw;
                max-width: 400px;
                min-width: 0;
                height: auto;
            }

            #scoreBoard {
                color: #fff;
                font-size: 1.5rem;
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                margin-bottom: 5px;
                letter-spacing: 2px;
                text-align: center;
                height: 2.1rem;
            }

            #startBtn,
            .gameOverBtns button {
                font-size: 1rem;
                padding: 9px 26px;
                border-radius: 10px;
                border: none;
                background: #ef4565;
                color: #fff;
                cursor: pointer;
                margin: 12px 5px 0 5px;
                box-shadow: 0 2px 8px #0003;
                transition: background 0.2s;
                font-weight: 600;
                letter-spacing: 1px;
                width: 80vw;
                max-width: 340px;
            }

            #startBtn:hover,
            .gameOverBtns button:hover {
                background: #d7264c;
            }

            #winMsg {
                color: #ffce6d;
                font-size: 1.5rem;
                font-weight: bold;
                text-shadow: 2px 4px 10px #000b;
                text-align: center;
                margin-top: 10px;
                min-height: 2.2rem;
            }

            .gameOverBtns {
                text-align: center;
                margin-top: 1.2rem;
            }

            #otherGames {
                width: 100vw;
                max-width: 400px;
                margin: 32px auto 20px auto;
                display: block;
                font-size: 1.04rem;
                padding: 12px 0;
                border-radius: 10px;
                border: none;
                background: #f9bc60;
                color: #22223b;
                font-weight: 600;
                letter-spacing: 1px;
                box-shadow: 0 2px 8px #0002;
                transition: background 0.18s;
                text-align: center;
                min-width: 0;
            }

            #otherGames:hover {
                background: #facf85;
            }

            .desc-ctrl {
                color: #bbb;
                font-size: 0.98rem;
                margin-top: 6px;
                text-align: center;
            }

            @media (max-width: 450px) {
                html,
                body,
                #container,
                #pong,
                #otherGames {
                    width: 100vw !important;
                    max-width: 100vw !important;
                    min-width: 0 !important;
                    box-sizing: border-box;
                }
                #gameTitle,
                #desc {
                    max-width: 100vw !important;
                }
            }
        </style>
    </head>

    <body>
        <div id="container">
            <div id="gameTitle">PONG vs AI</div>
            <div id="desc">å…ˆã«10ç‚¹å–ã£ãŸæ–¹ãŒå‹ã¡ï¼</div>
            <div id="scoreBoard"></div>
            <canvas id="pong" width="400" height="260"></canvas>
            <button id="startBtn" onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
            <div id="winMsg"></div>
            <div class="gameOverBtns" style="display: none">
                <button onclick="restartGame()">å†ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
                <button onclick="shareScore()">å…±æœ‰</button>
            </div>
            <div class="desc-ctrl">
                æ“ä½œæ–¹æ³•: W/S (å·¦å´ã‚ãªãŸ) ãƒ» å³ãƒ‘ãƒ‰ãƒ«ã¯AIãŒæ“ä½œ<br />ãƒ¢ãƒã‚¤ãƒ«ã§ã¯å·¦å´ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ãã ã•ã„ã€‚
            </div>
        </div>
        <button id="otherGames" onclick="window.location.href='../'">ä»–ã®ã‚²ãƒ¼ãƒ </button>
        <script>
            // --- å¤‰æ•°å®£è¨€ ---
            const canvas = document.getElementById("pong");
            const ctx = canvas.getContext("2d");
            const scoreBoard = document.getElementById("scoreBoard");
            const startBtn = document.getElementById("startBtn");
            const winMsgDiv = document.getElementById("winMsg");
            const gameOverBtns = document.querySelector(".gameOverBtns");
            const maxScore = 10;

            const paddleWidth = 12,
                paddleHeight = 56,
                ballSize = 14;
            const paddleSpeed = 6,
                ballSpeedStart = 2.7;
            let leftY, rightY, ballX, ballY, ballVelX, ballVelY;
            let leftScore = 0,
                rightScore = 0,
                gameRunning = false,
                inGame = false;
            let leftMove = 0;
            let aiLevel = 0.15;
            let rafId;

            // ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
            let particles = [];

            function spawnSpark(x, y, color = "#ffe287", count = 15) {
                for (let i = 0; i < count; i++) {
                    let angle = Math.random() * 2 * Math.PI;
                    let speed = 2.3 + Math.random() * 2.2;
                    particles.push({
                        x,
                        y,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        alpha: 1.1,
                        life: 12 + Math.random() * 5,
                        color,
                    });
                }
            }

            function updateParticles() {
                for (let i = particles.length - 1; i >= 0; i--) {
                    let p = particles[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vx *= 0.91;
                    p.vy *= 0.91;
                    p.alpha -= 0.06;
                    p.life--;
                    if (p.life <= 0 || p.alpha <= 0) particles.splice(i, 1);
                }
            }

            function drawParticles() {
                for (const p of particles) {
                    ctx.globalAlpha = Math.max(p.alpha, 0);
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2.1, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.fill();
                }
                ctx.globalAlpha = 1;
            }

            function resetVars() {
                leftY = (canvas.height - paddleHeight) / 2;
                rightY = (canvas.height - paddleHeight) / 2;
                ballX = (canvas.width - ballSize) / 2;
                ballY = (canvas.height - ballSize) / 2;
                let angle = ((Math.random() - 0.5) * Math.PI) / 3;
                let dir = Math.random() > 0.5 ? 1 : -1;
                ballVelX = ballSpeedStart * dir * Math.cos(angle);
                ballVelY = ballSpeedStart * Math.sin(angle);
            }

            function updateScore() {
                scoreBoard.textContent = `${leftScore} : ${rightScore}`;
            }

            function drawPaddle(x, y) {
                ctx.fillStyle = "#fffffe";
                ctx.fillRect(x, y, paddleWidth, paddleHeight);
            }

            function drawBall(x, y) {
                ctx.beginPath();
                ctx.arc(x + ballSize / 2, y + ballSize / 2, ballSize / 2, 0, Math.PI * 2);
                ctx.fillStyle = "#f9bc60";
                ctx.fill();
            }

            function drawCenterLine() {
                ctx.save();
                ctx.setLineDash([9, 11]);
                ctx.strokeStyle = "#393d42";
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 0);
                ctx.lineTo(canvas.width / 2, canvas.height);
                ctx.stroke();
                ctx.restore();
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawCenterLine();
                drawPaddle(10, leftY);
                drawPaddle(canvas.width - paddleWidth - 10, rightY);
                drawBall(ballX, ballY);
                drawParticles();
            }

            function stepGame() {
                leftY += leftMove * paddleSpeed;
                leftY = Math.max(0, Math.min(canvas.height - paddleHeight, leftY));
                // AI (å³å´)
                let targetY = ballY - (paddleHeight - ballSize) / 2;
                rightY += (targetY - rightY) * aiLevel;
                rightY = Math.max(0, Math.min(canvas.height - paddleHeight, rightY));
                // ãƒœãƒ¼ãƒ«ç§»å‹•
                ballX += ballVelX;
                ballY += ballVelY;

                // å£åå°„
                if (ballY <= 0 || ballY + ballSize >= canvas.height) ballVelY *= -1;
                // ãƒ‘ãƒ‰ãƒ«è¡çª
                let sparkAt = null;
                if (ballX <= 10 + paddleWidth && ballY + ballSize >= leftY && ballY <= leftY + paddleHeight) {
                    ballX = 10 + paddleWidth;
                    ballVelX *= -1.07;
                    let hit = (ballY + ballSize / 2 - (leftY + paddleHeight / 2)) / (paddleHeight / 2);
                    ballVelY += hit * 2.0;
                    sparkAt = { x: ballX + ballSize / 2, y: ballY + ballSize / 2, color: "#ffe287" };
                }
                if (
                    ballX + ballSize >= canvas.width - 10 - paddleWidth &&
                    ballY + ballSize >= rightY &&
                    ballY <= rightY + paddleHeight
                ) {
                    ballX = canvas.width - 10 - paddleWidth - ballSize;
                    ballVelX *= -1.07;
                    let hit = (ballY + ballSize / 2 - (rightY + paddleHeight / 2)) / (paddleHeight / 2);
                    ballVelY += hit * 2.0;
                    sparkAt = { x: ballX + ballSize / 2, y: ballY + ballSize / 2, color: "#86f4ff" };
                }
                if (sparkAt) spawnSpark(sparkAt.x, sparkAt.y, sparkAt.color);

                // å¾—ç‚¹ãŠã‚ˆã³ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ãƒã‚§ãƒƒã‚¯
                if (ballX < 0) {
                    rightScore++;
                    updateScore();
                    if (rightScore >= maxScore) {
                        endGame(false);
                        return;
                    }
                    resetVars();
                }
                if (ballX > canvas.width) {
                    leftScore++;
                    updateScore();
                    if (leftScore >= maxScore) {
                        endGame(true);
                        return;
                    }
                    resetVars();
                }
                updateParticles();
                draw();
                rafId = requestAnimationFrame(stepGame);
            }

            function startGame() {
                leftScore = 0;
                rightScore = 0;
                updateScore();
                resetVars();
                draw();
                startBtn.style.display = "none";
                winMsgDiv.textContent = "";
                gameOverBtns.style.display = "none";
                inGame = true;
                gameRunning = true;
                rafId = requestAnimationFrame(stepGame);
            }

            function restartGame() {
                leftScore = 0;
                rightScore = 0;
                updateScore();
                resetVars();
                draw();
                winMsgDiv.textContent = "";
                gameOverBtns.style.display = "none";
                inGame = true;
                gameRunning = true;
                rafId = requestAnimationFrame(stepGame);
            }

            function endGame(playerWin) {
                gameRunning = false;
                inGame = false;
                cancelAnimationFrame(rafId);
                winMsgDiv.textContent = playerWin ? "ã‚ãªãŸã®å‹ã¡ï¼ ğŸ‰" : "AIã®å‹åˆ©ï¼ ğŸ¤–";
                gameOverBtns.style.display = "block";
            }

            // å…±æœ‰ãƒœã‚¿ãƒ³
            function shareScore() {
                let text = `[PONG vs AI]\n${winMsgDiv.textContent}\nã‚ãªãŸã®ã‚¹ã‚³ã‚¢: ${leftScore}, AI: ${rightScore}\n\nã“ã“ã§ãƒ—ãƒ¬ã‚¤: ${window.location.href}`;
                if (navigator.share) {
                    navigator.share({ title: "PONG vs AI", text })
                        .catch(() => {
                            navigator.clipboard.writeText(text);
                            alert("çµæœãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼\n\n" + text);
                        });
                } else {
                    navigator.clipboard.writeText(text).then(() => {
                        alert("çµæœãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼\n\n" + text);
                    });
                }
            }

            // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
            document.addEventListener("keydown", (e) => {
                if (!inGame) return;
                if (e.key === "w" || e.key === "W") leftMove = -1;
                if (e.key === "s" || e.key === "S") leftMove = 1;
            });
            document.addEventListener("keyup", (e) => {
                if (!inGame) return;
                if (e.key === "w" || e.key === "W") leftMove = 0;
                if (e.key === "s" || e.key === "S") leftMove = 0;
            });

            // ãƒ¢ãƒã‚¤ãƒ«ã‚¿ãƒƒãƒï¼ˆå·¦ãƒ‘ãƒ‰ãƒ«ã®ã¿ï¼‰
            canvas.addEventListener("touchstart", function (e) {
                if (!inGame) return;
                const rect = canvas.getBoundingClientRect();
                for (const touch of e.touches) {
                    if (touch.clientX - rect.left < canvas.width / 2) {
                        let y = touch.clientY - rect.top - paddleHeight / 2;
                        y = Math.max(0, Math.min(canvas.height - paddleHeight, y));
                        leftY = y;
                    }
                }
            });
            canvas.addEventListener("touchmove", function (e) {
                if (!inGame) return;
                const rect = canvas.getBoundingClientRect();
                for (const touch of e.touches) {
                    if (touch.clientX - rect.left < canvas.width / 2) {
                        let y = touch.clientY - rect.top - paddleHeight / 2;
                        y = Math.max(0, Math.min(canvas.height - paddleHeight, y));
                        leftY = y;
                    }
                }
                e.preventDefault();
            });

            // ãƒ¢ãƒã‚¤ãƒ«ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢
            document.body.addEventListener(
                "touchmove",
                function (e) {
                    if (inGame) e.preventDefault();
                },
                {
                    passive: false,
                }
            );

            // åˆæœŸè¡¨ç¤º
            updateScore();
            resetVars();
            draw();
            startBtn.style.display = "block";
            winMsgDiv.textContent = "";
            gameOverBtns.style.display = "none";
        </script>
        <section
            style="
                max-width: 320px;
                width: 100%;
                margin: 48px auto 24px auto;
                font-family: 'Arial', sans-serif;
                font-size: 14px;
                background: #1e1e1e;
                border-radius: 18px;
                box-shadow: 0 6px 24px #1236;
                padding: 20px;
                line-height: 1.6;
                color: #f0f0f0;
            ">
            <h2 style="font-size: 1.4rem; margin-bottom: 14px; color: #f9bc60">â“ ã‚ˆãã‚ã‚‹è³ªå•</h2>

            <div style="margin-bottom: 12px">
                <strong>Q1. ã©ã®ã‚ˆã†ã«ãƒ—ãƒ¬ã‚¤ã—ã¾ã™ã‹ï¼Ÿ</strong><br />
                A. å·¦å´ã®ãƒ‘ãƒ‰ãƒ«ã‚’æ“ä½œã—ã€AIã‚ˆã‚Šå…ˆã«10ç‚¹ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†ã€‚W/Sã‚­ãƒ¼ã‚’ä½¿ã†ã‹ã€ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ãƒ‰ãƒ©ãƒƒã‚°ã§æ“ä½œã§ãã¾ã™ã€‚
            </div>

            <div style="margin-bottom: 12px">
                <strong>Q2. æ“ä½œæ–¹æ³•ã¯ä½•ã§ã™ã‹ï¼Ÿ</strong><br />
                A. PCã§ã¯Wã‚­ãƒ¼ï¼ˆä¸Šï¼‰ã¨Sã‚­ãƒ¼ï¼ˆä¸‹ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ç”»é¢å·¦å´ã‚’æŒ‡ã§ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ãã ã•ã„ã€‚
            </div>

            <div style="margin-bottom: 12px">
                <strong>Q3. AIã¯ã©ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ã‹ï¼Ÿ</strong><br />
                A. AIã¯ãƒœãƒ¼ãƒ«ã‚’è¿½è·¡ã—ã€è‡ªå‹•ã§ãƒ‘ãƒ‰ãƒ«ã‚’æ“ä½œã—ã¾ã™ã€‚ãƒœãƒ¼ãƒ«é€Ÿåº¦ãŒé€Ÿããªã‚‹ã»ã©AIã®é›£æ˜“åº¦ã‚‚ä¸ŠãŒã‚Šã¾ã™ã€‚
            </div>

            <div style="margin-bottom: 12px">
                <strong>Q4. å‹åˆ©ã¾ãŸã¯æ•—åŒ—ã—ãŸã‚‰ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ</strong><br />
                A. å‹åˆ©ã¾ãŸã¯æ•—åŒ—ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãã®å¾Œã€å†ã‚¹ã‚¿ãƒ¼ãƒˆã—ãŸã‚Šã‚¹ã‚³ã‚¢ã‚’å…±æœ‰ã—ãŸã‚Šã§ãã¾ã™ã€‚
            </div>

            <div style="margin-bottom: 12px">
                <strong>Q5. çµæœã‚’ã©ã†ã‚„ã£ã¦å…±æœ‰ã§ãã¾ã™ã‹ï¼Ÿ</strong><br />
                A. ã€Œå…±æœ‰ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚¹ã‚³ã‚¢ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã€å‹é”ã¨å…±æœ‰ã§ãã¾ã™ã€‚
            </div>

            <div style="margin-bottom: 0">
                <strong>Q6. ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã§ã™ã‹ï¼Ÿ</strong><br />
                A. ã¯ã„ã€ãƒ¢ãƒã‚¤ãƒ«ãŠã‚ˆã³ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã®ãƒ–ãƒ©ã‚¦ã‚¶ä¸¡æ–¹ã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚
            </div>
        </section>
    </body>
</html>
