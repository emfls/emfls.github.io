<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Smart Beautifier (HTML/CSS/JS, Tab Indent Only)</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta name="description"
		content="Paste any HTML, CSS, or JS. Beautifies with tab indents automatically. 100% in your browser.">
	<style>
		html,
		body {
			margin: 0;
			padding: 0;
			background: #f6fcff;
			min-height: 100%;
		}

		body {
			font-family: 'Segoe UI', Arial, sans-serif;
			min-height: 100vh;
		}

		.container {
			max-width: 620px;
			margin: 38px auto 0 auto;
			background: #fff;
			border-radius: 18px;
			box-shadow: 0 4px 22px #13d2b033;
			padding: 28px 18px 22px 18px;
		}

		.logo {
			font-size: 1.25em;
			color: #19788a;
			font-weight: bold;
			margin-bottom: 6px;
			text-align: center;
		}

		.desc {
			color: #357890;
			text-align: center;
			margin-bottom: 18px;
			font-size: 0.98em;
		}

		.input-area,
		.output-area {
			width: 100%;
			box-sizing: border-box;
			/* 핵심! */
			min-height: 120px;
			border: 1.2px solid #cce9ef;
			border-radius: 9px;
			padding: 11px;
			font-size: 1em;
			background: #fafdff;
			font-family: 'Fira Mono', 'Menlo', monospace;
			resize: vertical;
			margin-bottom: 8px;
			line-height: 1.6;
			overflow-x: auto;
		}

		.output-area {
			background: #e7f9f3;
		}

		.btn,
		.btn-copy {
			background: #1495c5;
			color: #fff;
			border: none;
			border-radius: 7px;
			padding: 10px 18px;
			margin: 10px 8px 0 0;
			cursor: pointer;
			font-size: 1.03em;
			transition: background 0.18s;
		}

		.btn:active,
		.btn-copy:active {
			background: #0b6180;
		}

		.info-msg {
			color: #1c9b56;
			font-size: 0.95em;
			margin: 6px 0 10px 0;
			text-align: center;
		}

		.footer {
			color: #789;
			text-align: center;
			font-size: 0.94em;
			margin-top: 22px;
		}

		@media (max-width:700px) {
			.container {
				max-width: 98vw;
				padding: 12px 2vw 14px 2vw;
			}

			.input-area,
			.output-area {
				font-size: 0.98em;
			}
		}
	</style>
	<!-- js-beautify (CDN) -->
	<script src="https://cdn.jsdelivr.net/npm/js-beautify@1.15.0/js/lib/beautify.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-beautify@1.15.0/js/lib/beautify-css.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-beautify@1.15.0/js/lib/beautify-html.min.js"></script>
</head>

<body>
	<div class="container">
		<div class="logo">✨ Smart Beautifier</div>
		<div class="desc">
			Paste any messy HTML, CSS, or JavaScript.<br>
			It will auto-detect and prettify your code with <b>tab</b> indents.<br>
			<span style="color:#19788a;font-size:0.93em;">100% client-side, no upload.</span>
		</div>
		<textarea id="inputArea" class="input-area" placeholder="Paste HTML, CSS, or JS here..."></textarea>
		<button class="btn" id="beautifyBtn">Beautify</button>
		<div style="margin-top:8px; margin-bottom:3px; font-size:0.98em; color:#167088;">Result:</div>
		<textarea id="outputArea" class="output-area" readonly
			placeholder="Beautified code will appear here"></textarea>
		<button class="btn-copy" id="copyBtn">Copy</button>
		<div class="info-msg" id="infoMsg"></div>
		<div class="footer">
			100% client-side, open source. Powered by
			<a href="https://github.com/beautify-web/js-beautify" style="color:#1495c5" target="_blank">js-beautify</a>.
		</div>
	</div>
	<script>
		function detectType(code) {
			// HTML 우선 감지
			if (
				/^\s*<!DOCTYPE html/i.test(code) ||
				/<html[\s>]/i.test(code) ||
				/<body[\s>]/i.test(code) ||
				/<head[\s>]/i.test(code) ||
				/<div[\s>]/i.test(code) ||
				/<style[\s>]/i.test(code) ||
				/<script[\s>]/i.test(code)
			) return "html";
			// CSS 감지
			if (
				/^[\s\S]*?\{[\s\S]*?\}[\s;]*$/.test(code) && // 중괄호 블럭 있음
				/^[\s\S]*?[\.\#a-zA-Z0-9\-]+\s*\{[\s\S]*?\}/.test(code)
			) return "css";
			// JS (함수, 변수, 제어문, 익명함수, etc)
			if (
				/\b(function|var|let|const|=>|import |export |require\(|if\s*\(|for\s*\(|while\s*\(|console\.|window\.|document\.|class\s+\w+)/
				.test(code)
			) return "js";
			// 기본은 html
			return "html";
		}

		document.getElementById('beautifyBtn').onclick = function() {
			var code = document.getElementById('inputArea').value;
			var outputArea = document.getElementById('outputArea');
			var infoMsg = document.getElementById('infoMsg');
			if (!code.trim()) {
				infoMsg.textContent = "Please paste code first.";
				outputArea.value = "";
				return;
			}
			// 항상 탭(\t)으로 들여쓰기
			let indent_char = "\t",
				indent_size = 1;
			var type = detectType(code);
			var beautified = "";
			try {
				if (type === "html") {
					beautified = html_beautify(code, {
						indent_size: indent_size,
						indent_char: indent_char,
						wrap_line_length: 120,
						unformatted: [],
						preserve_newlines: true,
						content_unformatted: []
					});
				} else if (type === "css") {
					beautified = css_beautify(code, {
						indent_size: indent_size,
						indent_char: indent_char
					});
				} else if (type === "js") {
					beautified = js_beautify(code, {
						indent_size: indent_size,
						indent_char: indent_char,
						max_preserve_newlines: 2
					});
				}
				outputArea.value = beautified;
				infoMsg.textContent = "Beautified! (" + type.toUpperCase() + ", " + beautified.length + " chars)";
			} catch (e) {
				infoMsg.textContent = "Error: " + (e.message || e);
				outputArea.value = "";
			}
		};

		document.getElementById('copyBtn').onclick = function() {
			var outputArea = document.getElementById('outputArea');
			outputArea.select();
			document.execCommand('copy');
			document.getElementById('infoMsg').textContent = "Copied!";
		};
	</script>
</body>

</html>
