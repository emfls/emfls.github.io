<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Image Compressor â€“ Reduce Photo File Size</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="title" content="Free Image Compressor â€“ Batch Photo Size Reducer Online">
<meta name="description" content="Instantly compress and reduce photo file size in your browser. Batch image compression, 100% free & private. No upload, no watermark, unlimited use.">

<!-- Canonical URL (replace with your domain) -->
<link rel="canonical" href="https://emfls.github.io/UTIL/ImageCompressor" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://emfls.github.io/UTIL/ImageCompressor">
<meta property="og:title" content="Free Image Compressor â€“ Batch Photo Size Reducer Online">
<meta property="og:description" content="Compress multiple images and photos at once, reduce file size, and save space. Works entirely in your browser â€“ no upload, no watermark.">
<meta property="og:image" content="https://emfls.github.io/thumbnail.png">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://emfls.github.io/UTIL/ImageCompressor">
<meta name="twitter:title" content="Free Image Compressor â€“ Batch Photo Size Reducer Online">
<meta name="twitter:description" content="Compress multiple images and photos at once, reduce file size, and save space. 100% private.">
<meta name="twitter:image" content="https://emfls.github.io/thumbnail.png">

<!-- Extra: Keywords, Language, Author -->
<meta name="keywords" content="image compressor, reduce photo size, batch image compression, online image tool, jpg compressor, jpeg reducer, photo optimizer, free image compression, bulk photo shrink, no watermark">
<meta name="language" content="en">
<meta name="author" content="Itagi">
  <script src="emfls.github.io/google.js"></script>
  <style>
    :root {
      --main: #24c6d2;
      --main-dark: #198b98;
      --bg: #f4fcfd;
      --box: #fff;
      --border: #e3f0f2;
      --accent: #183f5a;
      --faq-bg: #e9f6f8;
    }
    html, body { background: var(--bg); margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', Arial, sans-serif; min-height: 100vh; }
    .container {
      max-width: 430px;
      margin: 36px auto 0 auto;
      background: var(--box);
      border-radius: 20px;
      box-shadow: 0 6px 30px #0ad4d323;
      padding: 32px 16px 26px 16px;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 2em;
      font-weight: bold;
      justify-content: center;
      color: var(--main-dark);
      margin-bottom: 10px;
      letter-spacing: -1px;
    }
    .logo-icon {
      font-size: 1.25em;
      color: var(--main);
      filter: drop-shadow(0 2px 3px #24c6d255);
    }
    h2 { text-align: center; font-size: 1.35em; color: var(--accent); margin: 0 0 12px 0; }
    .desc { text-align: center; color: #286673; margin-bottom: 28px; font-size: 1.05em; }
    input[type="file"] { display: block; margin: 0 auto 20px auto; }
    .slider-wrap { margin: 18px 0 24px 0; }
    .slider-wrap label { font-size: 0.98em; }
    .slider-wrap input[type="range"] { width: 100%; }
    .gallery { display: flex; flex-direction: column; gap: 20px; margin-bottom: 16px; }
    .img-card {
      display: flex; flex-direction: row; gap: 10px;
      align-items: flex-start; background: var(--faq-bg);
      border-radius: 14px; padding: 10px 10px 12px 10px; border: 1px solid var(--border);
    }
    .img-preview { border-radius: 10px; max-width: 76px; max-height: 76px; min-width: 58px; object-fit: contain; background: #fff; border: 1px solid #c6e6ef; }
    .img-info { flex: 1; }
    .img-name { font-size: 1em; color: var(--accent); margin-bottom: 4px; }
    .img-sizes { font-size: 0.95em; color: #17787e; margin-bottom: 4px; }
    .img-actions { margin-top: 5px; }
    .download-btn {
      background: var(--main);
      color: #fff;
      padding: 7px 16px;
      border-radius: 7px;
      border: none;
      font-size: 0.98em;
      cursor: pointer;
      transition: background 0.18s;
      margin-right: 7px;
      margin-bottom: 2px;
    }
    .download-btn:active { background: var(--main-dark); }
    .all-download-btn {
      background: var(--main-dark);
      color: #fff;
      border: none;
      border-radius: 9px;
      font-size: 1em;
      width: 100%;
      margin-top: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background 0.19s;
    }
    .all-download-btn:active { background: #104e54; }
    .faq-wrap {
      background: var(--faq-bg); border-radius: 15px;
      padding: 18px 14px 13px 16px; margin: 30px 0 0 0;
      border: 1px solid var(--border);
      font-size: 0.99em;
    }
    .faq-title { font-weight: bold; color: var(--main-dark); margin-bottom: 6px; }
    .faq-q { color: #195269; margin-top: 9px; margin-bottom: 2px; font-weight: 500;}
    .faq-a { color: #265a7a; margin-left: 7px; }
    @media (max-width: 600px) {
      .container { max-width: 99vw; padding: 12px 2vw 10px 2vw; }
      .img-card { flex-direction: column; align-items: center; gap: 5px; }
      .img-preview { max-width: 92vw; max-height: 44vw; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo"><span class="logo-icon">ðŸª„</span>Image Compressor</div>
    <h2>Batch Reduce Your Photo Size</h2>
    <div class="desc">
      Instantly compress and resize your images.<br>
      100% free & private. No upload needed.<br>
      <span style="font-size:0.92em;color:#1ca5b0;">Supports multiple files at once!</span>
    </div>
    <input type="file" id="fileInput" accept="image/*" multiple>
    <div class="slider-wrap" id="sliderWrap" style="display:none">
      <label for="qualityRange">Compression Quality: <span id="qualityVal">80</span>%</label>
      <input type="range" id="qualityRange" min="10" max="100" value="80">
    </div>
    <div id="gallery" class="gallery"></div>
    <button class="all-download-btn" id="allDownloadBtn" style="display:none">Download All as ZIP</button>
    <div class="faq-wrap">
      <div class="faq-title">FAQ</div>
      <div class="faq-q">Is my photo uploaded?</div>
      <div class="faq-a">No, all compression happens directly in your browser. Your images never leave your device.</div>
      <div class="faq-q">What file types are supported?</div>
      <div class="faq-a">You can upload JPG, PNG, WebP, and more. All outputs are JPEG for maximum compression.</div>
      <div class="faq-q">How can I compress many photos at once?</div>
      <div class="faq-a">Just select multiple images (hold Ctrl or Shift, or long-tap on mobile), and all will be processed in a batch.</div>
      <div class="faq-q">How much can I reduce the size?</div>
      <div class="faq-a">Typical reduction is 50â€“90% depending on original quality and your settings.</div>
    </div>
  </div>
  <!-- JSZip for ZIP download (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script>
    const fileInput = document.getElementById('fileInput');
    const qualityRange = document.getElementById('qualityRange');
    const qualityVal = document.getElementById('qualityVal');
    const sliderWrap = document.getElementById('sliderWrap');
    const gallery = document.getElementById('gallery');
    const allDownloadBtn = document.getElementById('allDownloadBtn');

    let filesData = [];
    let compressQuality = 0.8;

    function updateQualityVal() {
      qualityVal.textContent = qualityRange.value;
      compressQuality = parseInt(qualityRange.value, 10) / 100;
    }
    updateQualityVal();

    qualityRange.addEventListener('input', async function() {
      updateQualityVal();
      if (filesData.length) await processAllFiles(filesData.map(f => f.file));
    });

    fileInput.addEventListener('change', async function() {
      const files = Array.from(fileInput.files);
      if (!files.length) return;
      await processAllFiles(files);
    });

    async function processAllFiles(files) {
      gallery.innerHTML = '';
      filesData = [];
      sliderWrap.style.display = 'block';
      allDownloadBtn.style.display = 'none';

      for (const file of files) {
        const card = document.createElement('div');
        card.className = 'img-card';
        const originalImg = document.createElement('img');
        originalImg.className = 'img-preview';
        const compressedImg = document.createElement('img');
        compressedImg.className = 'img-preview';
        compressedImg.style.border = '1.5px solid #13d2b0';

        // Read original
        const reader = new FileReader();
        await new Promise((resolve) => {
          reader.onload = function(e) {
            originalImg.src = e.target.result;
            resolve();
          };
          reader.readAsDataURL(file);
        });

        // Compress
        const {compressedDataUrl, compressedSize, width, height} = await compressImage(file, compressQuality);

        compressedImg.src = compressedDataUrl;
        // Info
        const infoDiv = document.createElement('div');
        infoDiv.className = 'img-info';
        const nameDiv = document.createElement('div');
        nameDiv.className = 'img-name';
        nameDiv.textContent = file.name.length > 32 ? file.name.slice(0,30)+'â€¦' : file.name;
        const sizesDiv = document.createElement('div');
        sizesDiv.className = 'img-sizes';
        sizesDiv.innerHTML =
          `Original: ${(file.size/1024).toFixed(1)} KB â†’ <b>${(compressedSize/1024).toFixed(1)} KB</b>
           <br><span style="color:#16b980">${Math.max(0,100-compressedSize/file.size*100).toFixed(1)}% smaller</span>
           <br><span style="font-size:0.89em;color:#229;">${width}Ã—${height}px</span>`;
        // Actions
        const actionsDiv = document.createElement('div');
        actionsDiv.className = 'img-actions';
        const dlBtn = document.createElement('button');
        dlBtn.className = 'download-btn';
        dlBtn.textContent = 'Download';
        dlBtn.onclick = () => downloadSingle(compressedDataUrl, autoFileName(file.name));
        actionsDiv.appendChild(dlBtn);

        // Show preview
        card.appendChild(originalImg);
        card.appendChild(compressedImg);
        infoDiv.appendChild(nameDiv);
        infoDiv.appendChild(sizesDiv);
        infoDiv.appendChild(actionsDiv);
        card.appendChild(infoDiv);
        gallery.appendChild(card);

        // Store for ZIP download
        filesData.push({
          file,
          compressedDataUrl,
          compressedSize,
          fileName: autoFileName(file.name)
        });
      }
      if (filesData.length > 1) {
        allDownloadBtn.style.display = 'block';
      }
    }

    // Compress function
    async function compressImage(file, quality=0.8) {
      const img = new Image();
      img.src = URL.createObjectURL(file);
      await img.decode();

      // Limit size for mobile/browser stability
      const maxW = 1600, maxH = 1600;
      let [w, h] = [img.width, img.height];
      if (w > maxW || h > maxH) {
        const ratio = Math.min(maxW/w, maxH/h);
        w = Math.round(w * ratio); h = Math.round(h * ratio);
      }
      const canvas = document.createElement('canvas');
      canvas.width = w; canvas.height = h;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0, w, h);
      const dataUrl = canvas.toDataURL('image/jpeg', quality);
      // base64 â†’ estimated bytes
      const len = dataUrl.length * 3 / 4;
      return { compressedDataUrl: dataUrl, compressedSize: len, width: w, height: h };
    }

    // File name logic
    function autoFileName(name) {
      let base = name.replace(/\.[^/.]+$/, ""); // Remove extension
      return base + "_compressed.jpg";
    }

    // Download for one file
    function downloadSingle(dataUrl, name) {
      const a = document.createElement('a');
      a.href = dataUrl;
      a.download = name;
      a.click();
    }

    // Download all as zip
    allDownloadBtn.onclick = async () => {
      if (!filesData.length) return;
      const zip = new JSZip();
      filesData.forEach(({compressedDataUrl, fileName}) => {
        zip.file(fileName, dataURItoBlob(compressedDataUrl));
      });
      const blob = await zip.generateAsync({type:"blob"});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = "compressed_images.zip";
      a.click();
    };

    // Helper: DataURL to Blob
    function dataURItoBlob(dataURI) {
      // Code from https://stackoverflow.com/a/12300351
      var byteString = atob(dataURI.split(',')[1]);
      var ab = new ArrayBuffer(byteString.length);
      var ia = new Uint8Array(ab);
      for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
      }
      return new Blob([ab], { type: 'image/jpeg' });
    }
  </script>
</body>
</html>
