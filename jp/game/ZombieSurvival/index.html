<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>üßü „Çæ„É≥„ÉìÁîüÂ≠ò</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QP5Q67GE5B"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-QP5Q67GE5B");
    </script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8830524482034754"
      crossorigin="anonymous"></script>
    <!-- SEO & Social meta -->
    <meta
      name="description"
      content="„ÉÜ„Ç≠„Çπ„Éà„Éô„Éº„Çπ„ÅÆ„Çæ„É≥„Éì„Ç¢„Éù„Ç´„É™„Éó„Çπ„Åß„Åß„Åç„Çã„Å†„ÅëÈï∑„ÅèÁîü„ÅçÊÆã„Çç„ÅÜÔºÅ„É©„É≥„ÉÄ„É†„Ç§„Éô„É≥„Éà„ÄÅ„Ç¢„Ç§„ÉÜ„É†ÁÆ°ÁêÜ„ÄÅÂç±Èô∫„Å™„Çæ„É≥„ÉìË•≤Êù•„ÄÇ100%ÁÑ°Êñô„ÅÆ„Éñ„É©„Ç¶„Ç∂„Ç≤„Éº„É†„Åß„Åô„ÄÇ" />
    <meta
      name="keywords"
      content="„Çæ„É≥„Éì, ÁîüÂ≠ò, „Ç¢„Éù„Ç´„É™„Éó„Çπ, „Ç¶„Çß„Éñ„Ç≤„Éº„É†, „ÉÜ„Ç≠„Çπ„Éà„Ç≤„Éº„É†, „Éñ„É©„Ç¶„Ç∂„Ç≤„Éº„É†, „Çµ„Éê„Ç§„Éê„É´, ÁÑ°Êñô„Ç≤„Éº„É†" />
    <meta name="author" content="Itagi" />
    <meta name="language" content="ja" />
    <meta name="theme-color" content="#191d22" />
    <link rel="canonical" href="https://emfls.github.io/jp/game/ZombieSurvival/index.html" />
    <link rel="icon" href="https://emfls.github.io/icon-192.png" />
    <!-- Open Graph (Facebook, Kakao, etc) -->
    <meta property="og:title" content="„Çæ„É≥„ÉìÁîüÂ≠ò ‚Äì „ÉÜ„Ç≠„Çπ„Éà„Ç≤„Éº„É†" />
    <meta
      property="og:description"
      content="„Çæ„É≥„Éì„Ç¢„Éù„Ç´„É™„Éó„Çπ„Åß‰ΩïÊó•Áîü„ÅçÂª∂„Å≥„Çâ„Çå„Çã„ÅãÔºü„Ç¢„Ç§„ÉÜ„É†ÁÆ°ÁêÜ„ÄÅÊé¢Á¥¢„ÄÅÊ≠ª„ÇíÈÅø„Åë„Å¶Áîü„ÅçÊÆã„Çç„ÅÜÔºÅ100%„Éñ„É©„Ç¶„Ç∂„Éô„Éº„Çπ„ÄÅ„Çµ„Ç§„É≥„Ç¢„ÉÉ„Éó‰∏çË¶Å„ÄÇ" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://emfls.github.io/jp/game/ZombieSurvival/index.html" />
    <meta property="og:image" content="https://emfls.github.io/thumbnail.png" />
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="„Çæ„É≥„ÉìÁîüÂ≠ò ‚Äì „ÉÜ„Ç≠„Çπ„Éà„Ç≤„Éº„É†" />
    <meta
      name="twitter:description"
      content="„Çæ„É≥„Éì„Ç¢„Éù„Ç´„É™„Éó„Çπ„ÅßÁîü„ÅçÂª∂„Å≥„Çà„ÅÜ„ÄÇ„Éñ„É©„Ç¶„Ç∂„Éô„Éº„Çπ„ÅÆÁÑ°Êñô„Ç≤„Éº„É†„ÄÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ‰∏çË¶Å„ÄÇ" />
    <meta name="twitter:image" content="https://emfls.github.io/thumbnail.png" />
    <style>
      html,
      body {
        background: #191d22;
        margin: 0;
        padding: 0;
        height: 100%;
      }
      body {
        font-family: "Segoe UI", "Pretendard", Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
      }
      #container {
        background: rgba(34, 39, 46, 0.99);
        border-radius: 18px;
        box-shadow: 0 6px 32px #1118;
        width: 99vw;
        max-width: 390px;
        margin: 10px 0 20px 0;
        padding: 14px 8px 18px 8px;
        box-sizing: border-box;
        min-height: 610px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      h2 {
        color: #f6fa4e;
        letter-spacing: 1.5px;
        text-align: center;
        margin: 0 0 6px 0;
        font-size: 1.6em;
        font-weight: 700;
        text-shadow: 0 2px 12px #161;
      }
      #status {
        background: #22262e;
        border-radius: 12px;
        padding: 9px 10px 7px 10px;
        font-size: 1em;
        margin-bottom: 2px;
        line-height: 1.8em;
        min-height: 49px;
        color: #fff;
        box-shadow: 0 2px 6px #0106;
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      #barGroup {
        display: flex;
        gap: 10px;
        margin-bottom: 2px;
      }
      .bar {
        flex: 1;
        border-radius: 7px;
        height: 13px;
        background: #37445a;
        margin-right: 1px;
        overflow: hidden;
        position: relative;
      }
      .fill-hp {
        background: linear-gradient(90deg, #fd7f7e, #feefae);
      }
      .fill-hunger {
        background: linear-gradient(90deg, #71e397, #f5f79e);
      }
      .fill-mental {
        background: linear-gradient(90deg, #6ed9ef, #c9b0f4);
      }
      .bar > span {
        display: block;
        height: 100%;
        transition: width 0.7s cubic-bezier(0.7, 1.3, 0.4, 1);
      }
      #inventory {
        font-size: 0.98em;
        color: #ffe;
        word-break: break-all;
        margin-bottom: 2px;
      }
      #log {
        background: #2d3341;
        border-radius: 11px;
        min-height: 87px;
        max-height: 140px;
        overflow-y: auto;
        font-size: 0.97em;
        padding: 7px 7px 7px 10px;
        color: #f4fffa;
        line-height: 1.4em;
        margin-bottom: 2px;
        box-shadow: 0 1px 6px #1116;
        scroll-behavior: smooth;
      }
      .event {
        animation: eventFlash 0.5s;
      }
      @keyframes eventFlash {
        0% {
          background: #fec;
          color: #111;
        }
        100% {
          background: inherit;
          color: inherit;
        }
      }
      .zombie-anim {
        animation: zombiePop 0.6s;
      }
      @keyframes zombiePop {
        0% {
          transform: scale(0.7);
        }
        40% {
          transform: scale(1.2);
        }
        80% {
          transform: scale(1);
        }
      }
      .item-anim {
        animation: itemPop 0.4s;
      }
      @keyframes itemPop {
        0% {
          transform: scale(0.5);
        }
        60% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }
      #actions {
        margin: 3px 0 0 0;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .actBtn,
      .locBtn {
        width: 100%;
        font-size: 1.07em;
        padding: 12px 2px;
        border-radius: 8px;
        border: none;
        margin-bottom: 2px;
        background: linear-gradient(90deg, #232d3d 70%, #2c374d 100%);
        color: #ffe;
        box-shadow: 0 2px 6px #1012;
        font-weight: 700;
        transition: background 0.18s;
        letter-spacing: 0.02em;
        cursor: pointer;
        outline: none;
      }
      .actBtn:active,
      .locBtn:active {
        background: linear-gradient(90deg, #2c374d 20%, #232d3d 100%);
      }
      .emoji {
        font-size: 1.3em;
        vertical-align: middle;
      }
      #footer {
        color: #99a;
        font-size: 0.92em;
        margin-top: 8px;
        text-align: center;
      }
      /* „Ç¢„Ç§„ÉÜ„É†Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ */
      #itemDescBg {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(8, 10, 19, 0.54);
        z-index: 20;
        align-items: center;
        justify-content: center;
      }
      #itemDescModal {
        background: #23293a;
        border-radius: 14px;
        color: #fff;
        min-width: 210px;
        max-width: 90vw;
        padding: 21px 16px 18px 16px;
        box-shadow: 0 8px 48px #000c;
        font-size: 1.08em;
        z-index: 21;
        text-align: center;
        position: relative;
        animation: modalOpen 0.3s;
      }
      #itemDescModal b {
        color: #fffa88;
      }
      #itemDescModal .close {
        position: absolute;
        right: 13px;
        top: 8px;
        font-size: 1.5em;
        color: #7fd;
        background: none;
        border: none;
        cursor: pointer;
      }
      .item-info-btn {
        font-size: 0.93em;
        margin-left: 5px;
        background: none;
        border: none;
        color: #aef;
        cursor: pointer;
        vertical-align: middle;
      }
      @keyframes modalOpen {
        0% {
          transform: scale(0.85);
        }
        100% {
          transform: scale(1);
        }
      }
      @media (max-width: 400px) {
        #container {
          min-height: 480px;
        }
        #log {
          font-size: 0.93em;
          min-height: 66px;
          max-height: 98px;
        }
        #status {
          font-size: 0.93em;
        }
        .actBtn,
        .locBtn {
          font-size: 0.99em;
        }
      }
    </style>
  </head>
  <body>
    <div id="container">
      <h2>üßü „Çæ„É≥„ÉìÁîüÂ≠ò</h2>
      <div id="status"></div>
      <div id="inventory"></div>
      <div id="log"></div>
      <div id="actions"></div>
    </div>
    <!-- „Ç¢„Ç§„ÉÜ„É†Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div id="itemDescBg">
      <div id="itemDescModal">
        <button class="close" onclick="closeDesc()">&times;</button>
        <div id="itemDescText"></div>
      </div>
    </div>
    <button
      style="
        background: white;
        padding: 19px 20px 20px 20px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        text-align: center;
        width: 90%;
        max-width: 400px;
        position: fixed;
        color: black;
        font-weight: bold;
             bottom: 50px;
      "
      onclick="window.location.href='/'">
      üìÇ ‰ªñ„ÅÆ„Ç≤„Éº„É†
    </button>
    <script>
      // „Ç¢„Ç§„ÉÜ„É†ÂÆöÁæ© (ÂêçÂâç„ÉªÁµµÊñáÂ≠ó„Éª„Çø„Ç§„Éó„ÉªÂäπÊûú„ÉªË™¨Êòé)
      const ITEM_LIST = [
        {
          key: "üçûBread",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 22, 0, 100);
          },
          text: "(-22 Á©∫ËÖπ)",
          desc: "„Éë„É≥„ÄÇÁ©∫ËÖπÂ∫¶„ÇíÂ§ß„Åç„ÅèÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "üíßWater",
          type: "drink",
          effect: () => {
            state.hunger = clamp(state.hunger - 13, 0, 100);
          },
          text: "(-13 Á©∫ËÖπ)",
          desc: "Ê∞¥„ÄÇÁ©∫ËÖπÂ∫¶„ÇíÂ∞ë„ÅóÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "ü•™Sandwich",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 35, 0, 100);
          },
          text: "(-35 Á©∫ËÖπ)",
          desc: "„Çµ„É≥„Éâ„Ç§„ÉÉ„ÉÅ„ÄÇÁ©∫ËÖπÂ∫¶„ÇíÂ§ß„Åç„ÅèÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "ü•§Soda",
          type: "drink",
          effect: () => {
            state.mental = clamp(state.mental + 7, 0, 100);
            state.hunger = clamp(state.hunger - 7, 0, 100);
          },
          text: "(+7 Á≤æÁ•ûÂäõ, -7 Á©∫ËÖπ)",
          desc: "ÁÇ≠ÈÖ∏È£≤Êñô„ÄÇÊ∞óÂàÜ„ÅåÂ∞ë„ÅóËâØ„Åè„Å™„Çä„ÄÅÁ©∫ËÖπÂ∫¶„ÇÇÂ∞ë„ÅóÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "üç´Snack",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 12, 0, 100);
          },
          text: "(-12 Á©∫ËÖπ)",
          desc: "„ÅäËèìÂ≠ê„ÄÇÁ©∫ËÖπÂ∫¶„ÇíÂ∞ë„ÅóÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "üçèApple",
          type: "food",
          effect: () => {
            state.hunger = clamp(state.hunger - 11, 0, 100);
          },
          text: "(-11 Á©∫ËÖπ)",
          desc: "„É™„É≥„Ç¥„ÄÇÁ©∫ËÖπÂ∫¶„ÇíÂ∞ë„ÅóÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "üíäPainkiller",
          type: "heal",
          effect: () => {
            state.mental = clamp(state.mental + 22, 0, 100);
          },
          text: "(+22 Á≤æÁ•ûÂäõ)",
          desc: "ÈéÆÁóõÂâ§„ÄÇÁ≤æÁ•ûÂäõ„ÇíÂ§ß„Åç„ÅèÂõûÂæ©„Åô„Çã„ÄÇ"
        },
        {
          key: "üß∞Bandage",
          type: "heal",
          effect: () => {
            state.hp = clamp(state.hp + 17, 0, 100);
          },
          text: "(+17 HP)",
          desc: "ÂåÖÂ∏Ø„ÄÇ‰ΩìÂäõ„ÇíÂõûÂæ©„Åô„Çã„ÄÇ"
        },
        {
          key: "üî™Knife",
          type: "weapon",
          effect: () => {},
          text: "Ê≠¶Âô®",
          desc: "„Éä„Ç§„Éï„ÄÇ„Çæ„É≥„Éì„Å®Êà¶„ÅÜ„Å®„Åç„ÅÆ„ÉÄ„É°„Éº„Ç∏„ÇíÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "üîßWrench",
          type: "weapon",
          effect: () => {},
          text: "Ê≠¶Âô®",
          desc: "„É¨„É≥„ÉÅ„ÄÇ„Çæ„É≥„Éì„Å®Êà¶„ÅÜ„Å®„Åç„ÅÆ„ÉÄ„É°„Éº„Ç∏„ÇíÊ∏õ„Çâ„Åô„ÄÇ"
        },
        {
          key: "üî¶Flashlight",
          type: "tool",
          effect: () => {
            state.mental = clamp(state.mental + 5, 0, 100);
          },
          text: "(+5 Á≤æÁ•ûÂäõ)",
          desc: "Êáê‰∏≠ÈõªÁÅØ„ÄÇÁ≤æÁ•ûÂäõ„ÇíÂ∞ë„ÅóÂõûÂæ©„Åô„Çã„ÄÇ"
        },
        { key: "ü™ôCoin", type: "misc", effect: () => {}, text: "„Åü„Å†„ÅÆ„Ç≥„Ç§„É≥", desc: "„Ç≥„Ç§„É≥„ÄÇ‰Ωø„ÅÑÈÅì„ÅØ‰∏çÊòé„ÄÇ" },
        {
          key: "üì±Phone",
          type: "misc",
          effect: () => {},
          text: "Âãï„Åã„Å™„ÅÑ",
          desc: "„Çπ„Éû„Éõ„ÄÇÈõªÊ∫ê„ÅåÂÖ•„Çâ„Å™„ÅÑ„ÄÇ"
        }
      ];
      // Â†¥ÊâÄ„Éá„Éº„Çø (Â†¥ÊâÄÂêç, „Ç¢„Ç§„ÉÜ„É†, „Çæ„É≥„ÉìÂá∫ÁèæÁ¢∫Áéá)
      const LOC_POOL = [
        { name: "üè† ÂÆ∂", item: ["üçûBread", "ü•§Soda", "üì±Phone", "üî™Knife"], zombie: 18 },
        { name: "üè™ Â∫ó", item: ["ü•™Sandwich", "üíßWater", "üç´Snack", "üíäPainkiller", "ü™ôCoin"], zombie: 22 },
        { name: "üöó Ë∑ØÂú∞", item: ["üîßWrench", "üß∞Bandage", "üíßWater", "üçèApple"], zombie: 33 },
        { name: "üè¢ ‰∫ãÂãôÊâÄ", item: ["üç´Snack", "üíäPainkiller", "üî¶Flashlight"], zombie: 15 },
        { name: "üèû ÂÖ¨Âúí", item: ["üçèApple", "üíßWater", "ü™ôCoin"], zombie: 8 },
        { name: "üè´ Â≠¶Ê†°", item: ["üçûBread", "üç´Snack", "üì±Phone"], zombie: 17 },
        { name: "üèö ÂªÉÂ±ã", item: ["üî™Knife", "üß∞Bandage"], zombie: 28 },
        { name: "üè• ÁóÖÈô¢", item: ["üíäPainkiller", "üß∞Bandage", "üî¶Flashlight"], zombie: 18 },
        { name: "üè≠ Â∑•Â†¥", item: ["üîßWrench", "üî¶Flashlight"], zombie: 26 },
        { name: "üöâ Âú∞‰∏ãÈâÑ", item: ["üç´Snack", "üì±Phone"], zombie: 20 },
        { name: "üçî „Éï„Ç°„Çπ„Éà„Éï„Éº„ÉâÂ∫ó", item: ["üçûBread", "ü•™Sandwich", "ü•§Soda"], zombie: 19 },
        { name: "‚õΩ „Ç¨„ÇΩ„É™„É≥„Çπ„Çø„É≥„Éâ", item: ["üîßWrench", "üíßWater", "ü™ôCoin"], zombie: 23 },
        { name: "üõí „Çπ„Éº„Éë„Éº", item: ["üçûBread", "üçèApple", "ü•§Soda", "üíßWater"], zombie: 21 },
        { name: "üè® „Éõ„ÉÜ„É´", item: ["üç´Snack", "üíßWater", "üß∞Bandage"], zombie: 18 },
        { name: "üßë‚Äçüîß „Ç¨„É¨„Éº„Ç∏", item: ["üîßWrench", "ü™ôCoin"], zombie: 28 }
      ];
      function randomPlaces(n = 4) {
        let arr = LOC_POOL.slice();
        arr.sort(() => Math.random() - 0.5);
        return arr.slice(0, n + Math.floor(Math.random() * 2)); // 4ÔΩû5„ÅãÊâÄ
      }

      // Áä∂ÊÖã
      let state = {
        hp: 100,
        hunger: 35,
        mental: 55,
        day: 1,
        items: { "üçûBread": 5, "üíßWater": 5, "üíäPainkiller": 5 },
        alive: true,
        searching: false,
        locations: randomPlaces(),
        died: false
      };

      // „Ç§„É≥„Éô„É≥„Éà„É™ÊñáÂ≠óÂàóÂåñ
      function invStr(obj) {
        let out = [];
        for (let k of Object.keys(obj)) if (obj[k] > 0) out.push(`${k} x${obj[k]}`);
        return out.length ? out.join(", ") : "„Å™„Åó";
      }
      function clamp(val, min, max) {
        return Math.max(min, Math.min(max, val));
      }

      const logEl = document.getElementById("log");
      const statusEl = document.getElementById("status");
      const inventoryEl = document.getElementById("inventory");
      const actionsEl = document.getElementById("actions");
      const itemDescBg = document.getElementById("itemDescBg");
      const itemDescText = document.getElementById("itemDescText");

      function render() {
        statusEl.innerHTML = `<div style="font-size:1.09em;"><b>Day ${state.day}</b></div>
         <div id="barGroup">
           <div class="bar"><span class="fill-hp" style="width:${state.hp}%"></span></div>
           <div class="bar"><span class="fill-hunger" style="width:${clamp(100 - state.hunger, 0, 100)}%"></span></div>
           <div class="bar"><span class="fill-mental" style="width:${state.mental}%"></span></div>
         </div>
         <div style="font-size:0.97em; margin:0 2px 0 2px;">
            ‚ù§Ô∏èHP ${state.hp} &nbsp;|&nbsp; üçûÁ©∫ËÖπ ${state.hunger} &nbsp;|&nbsp; üß†Á≤æÁ•û ${state.mental}
         </div>`;
        inventoryEl.innerHTML = `<b>üéí„Ç§„É≥„Éô„É≥„Éà„É™:</b> ${invStr(state.items)}`;
        if (!state.alive) {
          actionsEl.innerHTML = `<button class="actBtn" onclick="restart()">ÂÜç„Çπ„Çø„Éº„Éà</button>`;
        } else if (state.searching) {
          actionsEl.innerHTML =
            state.locations
              .map((loc, i) => `<button class="locBtn" onclick="searchPlace(${i})">${loc.name}</button>`)
              .join("") + `<button class="actBtn" onclick="cancelSearch()">„Ç≠„É£„É≥„Çª„É´</button>`;
        } else {
          actionsEl.innerHTML = `
          <button class="actBtn" onclick="startSearch()" ${state.locations.length == 0 ? 'disabled style="opacity:0.5;"' : ""}>üîç Êé¢Á¥¢</button>
          <button class="actBtn" onclick="rest()">üõè ‰ºëÊÅØ</button>
          <button class="actBtn" onclick="move()">‚û°Ô∏è ÁßªÂãï</button>
          <button class="actBtn" onclick="useItem()">üéí „Ç¢„Ç§„ÉÜ„É†‰ΩøÁî®</button>
        `;
        }
      }

      function log(msg, type = "") {
        let d = document.createElement("div");
        d.innerHTML = msg;
        if (type) d.classList.add(type);
        logEl.appendChild(d);
        logEl.scrollTop = logEl.scrollHeight;
        if (type) setTimeout(() => d.classList.remove(type), 400);
      }

      function nextDay() {
        state.day++;
        state.hunger += 10;
        state.mental -= 4;
        if (state.hunger >= 95) {
          state.hp -= 15;
          log("üòñ <b>Á©∫ËÖπÁä∂ÊÖãÔºÅ</b> (-15 HP)", "event");
        }
        if (state.hp <= 0 || state.mental <= 0) {
          state.alive = false;
          log(`<b>„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº: „ÅÇ„Å™„Åü„ÅØ <span style="color:#e9f85b">${state.day - 1}</span> Êó•ÁîüÂ≠ò„Åó„Åæ„Åó„ÅüÔºÅ</b>`, "event");
        }
        render();
      }

      // ---- „Ç¢„ÇØ„Ç∑„Éß„É≥ ----
      function startSearch() {
        state.searching = true;
        render();
        log("Êé¢Á¥¢„Åô„ÇãÂ†¥ÊâÄ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ...");
      }
      function cancelSearch() {
        state.searching = false;
        render();
      }
      function searchPlace(idx) {
        let loc = state.locations[idx];
        log(`üîç <b>${loc.name}</b> „ÇíÊé¢Á¥¢‰∏≠...`);
        // „Ç¢„Ç§„ÉÜ„É†Áô∫Ë¶ã 52%„ÄÅ„Çæ„É≥„ÉìÈÅ≠ÈÅá loc.zombie%
        if (Math.random() * 100 < 52) {
          let found = loc.item[Math.floor(Math.random() * loc.item.length)];
          state.items[found] = (state.items[found] || 0) + 1;
          let itemInfo = ITEM_LIST.find((x) => x.key === found);
          log(
            `<span class="item-anim">‚ú® Áô∫Ë¶ã: <b>${found}</b> <span style="font-size:0.88em;color:#ffd;">${itemInfo ? itemInfo.text : ""}</span></span>`,
            "event"
          );
        } else if (Math.random() * 100 < loc.zombie) {
          encounterZombie(loc.name); // Âç≥ÊôÇÂèçÊò†
          // „Ç≤„Éº„É†„Ç™„Éº„Éê„Éº„ÉÅ„Çß„ÉÉ„ÇØ
          if (!state.alive) return;
        } else {
          log("‰Ωï„ÇÇË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ");
        }
        // Â†¥ÊâÄ„ÇíÂâäÈô§
        state.locations.splice(idx, 1);
        state.searching = false;
        nextDay();
      }
      function rest() {
        log("üõè ‰ºëÊÅØ„Åó„Åæ„Åó„Åü„ÄÇ +13 üß†Á≤æÁ•û„ÄÅ +12 ‚ù§Ô∏èHP„ÄÅ +9 Á©∫ËÖπ");
        state.mental = clamp(state.mental + 13, 0, 100);
        state.hp = clamp(state.hp + 12, 0, 100);
        state.hunger += 9;
        nextDay();
      }
      function move() {
        log("‚û°Ô∏è Êñ∞„Åó„ÅÑÂú∞Âüü„Å∏ÁßªÂãï„Åó„Åæ„Åó„Åü„ÄÇ -2 üß†Á≤æÁ•û");
        state.mental -= 2;
        // Êñ∞„Åó„ÅÑ„É©„É≥„ÉÄ„É†„Å™Â†¥ÊâÄ„Çí„É™„Çª„ÉÉ„Éà
        state.locations = randomPlaces();
        if (Math.random() * 100 < 22) {
          encounterZombie("Ë°ó‰∏≠"); // Âç≥Â∫ß„Å´ÂèçÊò†
          if (!state.alive) return;
        }
        nextDay();
      }
      function useItem() {
        let keys = Object.keys(state.items).filter((k) => state.items[k] > 0);
        if (!keys.length) {
          log("üéí ‰ΩøÁî®„Åß„Åç„Çã„Ç¢„Ç§„ÉÜ„É†„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ");
          return;
        }
        actionsEl.innerHTML =
          keys
            .map((item, i) => {
              let info = ITEM_LIST.find((x) => x.key === item);
              return `<button class="locBtn" onclick="chooseItem('${item}')">${item} x${state.items[item]} <span style="font-size:0.8em;color:#ffc;">${info ? info.text : ""}</span></button>`;
            })
            .join("") + `<button class="actBtn" onclick="render()">„Ç≠„É£„É≥„Çª„É´</button>`;
      }
      function chooseItem(item) {
        state.items[item]--;
        let info = ITEM_LIST.find((x) => x.key === item);
        if (info) info.effect();
        log(
          `<span class="item-anim">${item} „Çí‰ΩøÁî®ÔºÅ <span style="font-size:0.9em;color:#ffd;">${info ? info.text : ""}</span></span>`
        );
        render();
      }
      function encounterZombie(place) {
        let baseHp = 14 + Math.floor(Math.random() * 12); // 14ÔΩû25
        let baseMental = 8 + Math.floor(Math.random() * 8); // 8ÔΩû15
        let weapon = Object.keys(state.items).find(
          (x) => (x.includes("Knife") || x.includes("Wrench")) && state.items[x] > 0
        );
        let hpLoss = weapon ? Math.floor(baseHp * 0.5) : baseHp;
        let mLoss = weapon ? Math.floor(baseMental * 0.7) : baseMental;
        if (weapon) {
          log(
            `<span class="zombie-anim">üßü <b>„Çæ„É≥„ÉìÈÅ≠ÈÅáÔºÅ</b> (${place})<br>${weapon} „ÅßÊíÉÈÄÄÔºÅ <span style="color:#fd7;">(-${hpLoss} HP, -${mLoss} Á≤æÁ•û)</span></span>`,
            "event"
          );
        } else {
          log(
            `<span class="zombie-anim">üßü <b>„Çæ„É≥„ÉìÈÅ≠ÈÅáÔºÅ</b> (${place})<br>Ë≤†ÂÇ∑„Åó„Åæ„Åó„ÅüÔºÅ <span style="color:#fd7;">(-${hpLoss} HP, -${mLoss} Á≤æÁ•û)</span></span>`,
            "event"
          );
        }
        state.hp -= hpLoss;
        state.mental -= mLoss;
        // Âç≥ÊôÇ„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº„ÉÅ„Çß„ÉÉ„ÇØ
        if (state.hp <= 0 || state.mental <= 0) {
          state.alive = false;
          log(`<b>„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº: „ÅÇ„Å™„Åü„ÅØ <span style="color:#e9f85b">${state.day}</span> Êó•ÁîüÂ≠ò„Åó„Åæ„Åó„ÅüÔºÅ</b>`, "event");
          render();
        }
      }
      // „Ç¢„Ç§„ÉÜ„É†Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´Ë°®Á§∫
      function showDesc(item) {
        let info = ITEM_LIST.find((x) => x.key === item);
        if (!info) return;
        itemDescText.innerHTML = `<b>${item}</b><br><span style="font-size:1.07em;color:#fe9;">${info.desc || ""}</span><br><span style="color:#ffec;">ÂäπÊûú: ${info.text || ""}</span>`;
        itemDescBg.style.display = "flex";
      }
      function closeDesc() {
        itemDescBg.style.display = "none";
      }

      // -------- ÂàùÊúüË®≠ÂÆö --------
      render();
      log("Êñ∞„Åü„Å™ÁîüÂ≠òËÄÖ„ÅåË°ó„Å´ÂÖ•„Çä„Åæ„Åó„Åü...");
      function restart() {
        state = {
          hp: 100,
          hunger: 35,
          mental: 55,
          day: 1,
          items: { "üçûBread": 5, "üíßWater": 5, "üíäPainkiller": 5 },
          alive: true,
          searching: false,
          locations: randomPlaces(),
          died: false
        };
        logEl.innerHTML = "";
        render();
        log("Êñ∞„Åü„Å™ÁîüÂ≠òËÄÖ„ÅåË°ó„Å´ÂÖ•„Çä„Åæ„Åó„Åü...");
      }
    </script>
    <section
      style="
        max-width: 320px;
        margin: 48px auto 24px auto;
             margin-top: 300px;
        background: #1e1e1e;
        border-radius: 18px;
        box-shadow: 0 6px 24px #1236;
        padding: 20px;
        font-family: Arial, sans-serif;
      ">
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üßü Zombie Survival„Å®„ÅØÔºü</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          Zombie Survival„ÅØ„ÉÜ„Ç≠„Çπ„Éà„Éô„Éº„Çπ„ÅÆ„Çµ„Éê„Ç§„Éê„É´„Ç≤„Éº„É†„Åß„ÄÅ„Çæ„É≥„Éì„Ç¢„Éù„Ç´„É™„Éó„Çπ‰∏ã„ÅßÁ©∫ËÖπ„ÄÅÁ≤æÁ•û„ÄÅ‰ΩìÂäõ„ÇíÁÆ°ÁêÜ„Åó„Å™„Åå„ÇâÁîü„ÅçÊÆã„Çã„Åì„Å®„ÅåÁõÆÊ®ô„Åß„Åô„ÄÇÂ†¥ÊâÄ„ÇíÊé¢Á¥¢„Åó„Å¶„Ç¢„Ç§„ÉÜ„É†„ÇíÈõÜ„ÇÅ„ÄÅ„Åß„Åç„Çã„Å†„ÅëÈï∑„ÅèÁîü„ÅçÂª∂„Å≥„Åæ„Åó„Çá„ÅÜ„ÄÇ
        </p>
      </div>
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üó∫Ô∏è „Å©„ÅÜ„ÇÑ„Å£„Å¶„Éó„É¨„Ç§„Åô„Çã„ÅÆÔºü</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          ÁîªÈù¢‰∏ã„ÅÆ„Éú„Çø„É≥„Çí‰Ωø„Å£„Å¶„ÄåÊé¢Á¥¢„Äç„Äå‰ºëÊÅØ„Äç„ÄåÁßªÂãï„Äç„Äå„Ç¢„Ç§„ÉÜ„É†‰ΩøÁî®„Äç„ÇíÈÅ∏Êäû„Åó„Åæ„Åô„ÄÇÂ†¥ÊâÄ„ÇíÊé¢Á¥¢„Åô„Çã„Å®„Ç¢„Ç§„ÉÜ„É†„ÇíÊâã„Å´ÂÖ•„Çå„Åü„Çä„ÄÅ„Çæ„É≥„Éì„Å´ÈÅ≠ÈÅá„Åó„Åü„Çä„Åó„Åæ„ÅôÔºÅ
        </p>
      </div>
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üéí „Ç¢„Ç§„ÉÜ„É†„Å®„ÅØÔºü</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          „Ç¢„Ç§„ÉÜ„É†„ÅØ‰ΩìÂäõÂõûÂæ©„ÄÅÁ©∫ËÖπÂ∫¶Ê∏õÂ∞ë„ÄÅÁ≤æÁ•ûÂäõÂõûÂæ©„Å´ÂΩπÁ´ã„Å°„Åæ„Åô„ÄÇ„Éä„Ç§„Éï„ÇÑ„É¨„É≥„ÉÅ„Å™„Å©„ÅÆÊ≠¶Âô®„ÅØ„Çæ„É≥„Éì„Å®„ÅÆÊà¶„ÅÑÊôÇ„ÅÆ„ÉÄ„É°„Éº„Ç∏„ÇíËªΩÊ∏õ„Åó„Åæ„Åô„ÄÇ
        </p>
      </div>
      <div style="margin-bottom: 12px">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üß† Á≤æÁ•ûÂäõ„ÇÑ‰ΩìÂäõ„Åå0„Å´„Å™„Çã„Å®Ôºü</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          ‰ΩìÂäõ„Åæ„Åü„ÅØÁ≤æÁ•ûÂäõ„Åå0„Å´„Å™„Çã„Å®„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº„Åß„Åô„ÄÇÁ©∫ËÖπ„ÅØÊØéÊó•Â¢óÂä†„Åó„ÄÅ‰∏ÄÂÆö‰ª•‰∏ä„Å´„Å™„Çã„Å®‰ΩìÂäõ„ÅåÊ∏õÂ∞ë„Åô„Çã„ÅÆ„ÅßÊ≥®ÊÑè„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ
        </p>
      </div>
      <div style="margin-bottom: 0">
        <h3 style="color: #8f94fb; font-size: 1.1em; margin-bottom: 6px">üîÅ Ê≠ª‰∫°„Åó„Åü„ÇâÂÜçÊåëÊà¶„Åß„Åç„ÇãÔºü</h3>
        <p style="color: #f0f0f0; font-size: 0.95em; margin: 0">
          „ÅØ„ÅÑÔºÅÊ≠ª‰∫°„Åó„Åü„Çâ„ÄåÂÜç„Çπ„Çø„Éº„Éà„Äç„Éú„Çø„É≥„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ„ÇÇ„Å£„Å®Èï∑„ÅèÁîü„ÅçÂª∂„Å≥„Çã„Åü„ÇÅ„Å´„ÄÅ„Çà„ÇäËâØ„ÅÑÈÅ∏Êäû„Çí„Åó„Åæ„Åó„Çá„ÅÜÔºÅ
        </p>
      </div>
    </section>
  </body>
</html>
