<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>أداة ضغط الصور – تقليل حجم ملفات الصور</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="title" content="ضغط الصور المجاني – تقليل حجم الصور دفعة واحدة عبر الإنترنت" />
  <meta
    name="description"
    content="قم بضغط وتقليل حجم ملفات الصور على الفور داخل المتصفح. ضغط صور دفعة واحدة، مجاني 100% ويحافظ على الخصوصية. لا حاجة للتحميل، بدون علامات مائية، الاستخدام غير محدود." />
  <link rel="canonical" href="https://emfls.github.io/ae/util/ImageCompressor" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://emfls.github.io/ae/util/ImageCompressor/" />
  <meta property="og:title" content="ضغط الصور المجاني – تقليل حجم الصور دفعة واحدة عبر الإنترنت" />
  <meta
    property="og:description"
    content="قم بضغط عدة صور دفعة واحدة لتقليل حجم الملفات وتوفير مساحة التخزين. تتم جميع العمليات داخل المتصفح. لا حاجة للتحميل، بدون علامات مائية." />
  <meta property="og:image" content="https://emfls.github.io/thumbnail.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="https://emfls.github.io/ae/util/ImageCompressor/" />
  <meta name="twitter:title" content="ضغط الصور المجاني – تقليل حجم الصور دفعة واحدة عبر الإنترنت" />
  <meta
    name="twitter:description"
    content="قم بضغط عدة صور دفعة واحدة لتقليل حجم الملفات وتوفير مساحة التخزين. تتم جميع العمليات داخل المتصفح. لا حاجة للتحميل، بدون علامات مائية." />
  <meta
    name="keywords"
    content="ضغط الصور, تقليل حجم الصور, ضغط الصور دفعة واحدة, أداة صور على الإنترنت, ضغط JPG, تقليل JPEG, تحسين الصور, ضغط الصور مجاني, تقليل حجم عدد كبير من الصور, بدون علامات مائية" />
  <meta name="language" content="ar" />
  <meta name="author" content="Itagi" />
  <link rel="icon" href="https://emfls.github.io/icon-192.png" />
  <!-- Google 태그 (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QP5Q67GE5B"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-QP5Q67GE5B");
  </script>
  <script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8830524482034754"
    crossorigin="anonymous"></script>
  <style>
    :root {
      --main: #24c6d2;
      --main-dark: #198b98;
      --bg: #f4fcfd;
      --box: #fff;
      --border: #e3f0f2;
      --accent: #183f5a;
      --faq-bg: #e9f6f8;
    }
    html, body {
      background: var(--bg);
      margin: 0;
      padding: 0;
    }
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      min-height: 100vh;
    }
    .container {
      max-width: 430px;
      margin: 36px auto 0 auto;
      background: var(--box);
      border-radius: 20px;
      box-shadow: 0 6px 30px #0ad4d323;
      padding: 32px 16px 26px 16px;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 2em;
      font-weight: bold;
      justify-content: center;
      color: var(--main-dark);
      margin-bottom: 10px;
      letter-spacing: -1px;
    }
    .logo-icon {
      font-size: 1.25em;
      color: var(--main);
      filter: drop-shadow(0 2px 3px #24c6d255);
    }
    h2 {
      text-align: center;
      font-size: 1.35em;
      color: var(--accent);
      margin: 0 0 12px 0;
    }
    .desc {
      text-align: center;
      color: #286673;
      margin-bottom: 28px;
      font-size: 1.05em;
    }
    input[type="file"] {
      display: block;
      margin: 0 auto 20px auto;
    }
    .slider-wrap {
      margin: 18px 0 24px 0;
    }
    .slider-wrap label {
      font-size: 0.98em;
    }
    .slider-wrap input[type="range"] {
      width: 100%;
    }
    .gallery {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 16px;
    }
    .img-card {
      display: flex;
      flex-direction: row;
      gap: 10px;
      align-items: flex-start;
      background: var(--faq-bg);
      border-radius: 14px;
      padding: 10px 10px 12px 10px;
      border: 1px solid var(--border);
    }
    .img-preview {
      border-radius: 10px;
      max-width: 76px;
      max-height: 76px;
      min-width: 58px;
      object-fit: contain;
      background: #fff;
      border: 1px solid #c6e6ef;
    }
    .img-info {
      flex: 1;
    }
    .img-name {
      font-size: 1em;
      color: var(--accent);
      margin-bottom: 4px;
    }
    .img-sizes {
      font-size: 0.95em;
      color: #17787e;
      margin-bottom: 4px;
    }
    .img-actions {
      margin-top: 5px;
    }
    .download-btn {
      background: var(--main);
      color: #fff;
      padding: 7px 16px;
      border-radius: 7px;
      border: none;
      font-size: 0.98em;
      cursor: pointer;
      transition: background 0.18s;
      margin-right: 7px;
      margin-bottom: 2px;
    }
    .download-btn:active {
      background: var(--main-dark);
    }
    .all-download-btn {
      background: var(--main-dark);
      color: #fff;
      border: none;
      border-radius: 9px;
      font-size: 1em;
      width: 100%;
      margin-top: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background 0.19s;
    }
    .all-download-btn:active {
      background: #104e54;
    }
    section#faq {
      background: var(--faq-bg);
      border-radius: 15px;
      padding: 18px 14px 13px 16px;
      margin: 34px 0 0 0;
      border: 1px solid var(--border);
      font-size: 0.99em;
    }
    section#faq h3 {
      font-weight: bold;
      color: var(--main-dark);
      margin-bottom: 6px;
      font-size: 1.09em;
      text-align: center;
    }
    section#faq dt {
      color: #195269;
      margin-top: 10px;
      margin-bottom: 2px;
      font-weight: 500;
    }
    section#faq dd {
      color: #265a7a;
      margin-left: 7px;
      margin-bottom: 7px;
    }
    @media (max-width: 600px) {
      .container {
        max-width: 99vw;
        padding: 12px 2vw 10px 2vw;
      }
      .img-card {
        flex-direction: column;
        align-items: center;
        gap: 5px;
      }
      .img-preview {
        max-width: 92vw;
        max-height: 44vw;
      }
    }
    #backBtn {
      position: fixed;
      left: 50%;
      bottom: 32px;
      transform: translateX(-50%);
      background: #13b6a7;
      color: #fff;
      font-weight: 700;
      border: none;
      border-radius: 2rem;
      padding: 0.58em 1.5em;
      box-shadow: 0 4px 16px #13d2b066;
      font-size: 1.09em;
      text-decoration: none;
      cursor: pointer;
      letter-spacing: 0.01em;
      transition:
        background 0.15s,
        transform 0.12s;
      z-index: 2000;
    }
    #backBtn:hover {
      background: #0e8078;
      transform: translateX(-50%) scale(1.04);
    }
    @media (max-width: 600px) {
      #backBtn {
        bottom: 18px;
        font-size: 0.98em;
        padding: 0.48em 1em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo"><span class="logo-icon">🪄</span>أداة ضغط الصور</div>
    <h2>تقليل حجم الصور دفعة واحدة</h2>
    <div class="desc">
      قم بضغط الصور داخل المتصفح وتقليل حجمها على الفور.<br />
      مجاني 100% ويحافظ على الخصوصية. لا حاجة للتحميل.<br />
      <span style="font-size: 0.92em; color: #1ca5b0">دعم لعدة ملفات!</span>
    </div>
    <input type="file" id="fileInput" accept="image/*" multiple />
    <div class="slider-wrap" id="sliderWrap" style="display: none">
      <label for="qualityRange">جودة الضغط: <span id="qualityVal">80</span>%</label>
      <input type="range" id="qualityRange" min="10" max="100" value="80" />
    </div>
    <div id="gallery" class="gallery"></div>
    <button class="all-download-btn" id="allDownloadBtn" style="display: none">تحميل الكل كملف ZIP</button>
    <section id="faq" aria-labelledby="faq-head">
      <h3 id="faq-head">الأسئلة الشائعة – أداة ضغط الصور</h3>
      <dl>
        <dt>هل يتم رفع صوري؟</dt>
        <dd>لا. تتم جميع عمليات الضغط داخل المتصفح. الصور لا تُرسل إلى أي خادم خارجي.</dd>
        <dt>ما هي صيغ الملفات المدعومة؟</dt>
        <dd>يمكنك رفع JPG و PNG و WebP وغيرها. يتم إنشاء الإخراج كـ JPEG لتحقيق أقصى ضغط.</dd>
        <dt>كيف أضغط عدة صور مرة واحدة؟</dt>
        <dd>في نافذة اختيار الملفات اضغط Ctrl أو Shift لاختيار عدة صور، أو اضغط مطولاً على الهاتف المحمول لاختيار عدة صور. سيتم معالجتها دفعة واحدة.</dd>
        <dt>ما مقدار المساحة التي يمكن توفيرها؟</dt>
        <dd>اعتمادًا على الجودة الأصلية والإعدادات، يمكن عادةً تقليل الحجم بنسبة 50-90%.</dd>
        <dt>هل هناك حدود لحجم الملفات أو عدد الصور؟</dt>
        <dd>لا توجد حدود محددة، لكن قد تقل الأداء عند معالجة أعداد كبيرة بسبب قيود متصفح الويب (حوالي 20-30 صورة مناسب).</dd>
        <dt>هل هناك علامات مائية أو ميزات مدفوعة؟</dt>
        <dd>لا. بدون علامات مائية، لا حاجة للتسجيل، الاستخدام مجاني وغير محدود.</dd>
      </dl>
    </section>
  </div>
  <a href="../index.html" id="backBtn">أدوات أخرى</a>
  <!-- JSZip for ZIP download (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script>
    const fileInput = document.getElementById("fileInput");
    const qualityRange = document.getElementById("qualityRange");
    const qualityVal = document.getElementById("qualityVal");
    const sliderWrap = document.getElementById("sliderWrap");
    const gallery = document.getElementById("gallery");
    const allDownloadBtn = document.getElementById("allDownloadBtn");

    let filesData = [];
    let compressQuality = 0.8;

    function updateQualityVal() {
      qualityVal.textContent = qualityRange.value;
      compressQuality = parseInt(qualityRange.value, 10) / 100;
    }
    updateQualityVal();

    qualityRange.addEventListener("input", async function () {
      updateQualityVal();
      if (filesData.length) await processAllFiles(filesData.map((f) => f.file));
    });

    fileInput.addEventListener("change", async function () {
      const files = Array.from(fileInput.files);
      if (!files.length) return;
      await processAllFiles(files);
    });

    async function processAllFiles(files) {
      gallery.innerHTML = "";
      filesData = [];
      sliderWrap.style.display = "block";
      allDownloadBtn.style.display = "none";

      for (const file of files) {
        const card = document.createElement("div");
        card.className = "img-card";

        const originalImg = document.createElement("img");
        originalImg.className = "img-preview";

        const compressedImg = document.createElement("img");
        compressedImg.className = "img-preview";
        compressedImg.style.border = "1.5px solid #13d2b0";

        // تحميل الصورة الأصلية
        const reader = new FileReader();
        await new Promise((resolve) => {
          reader.onload = function (e) {
            originalImg.src = e.target.result;
            resolve();
          };
          reader.readAsDataURL(file);
        });

        // الضغط
        const { compressedDataUrl, compressedSize, width, height } = await compressImage(file, compressQuality);

        compressedImg.src = compressedDataUrl;

        // عرض المعلومات
        const infoDiv = document.createElement("div");
        infoDiv.className = "img-info";

        const nameDiv = document.createElement("div");
        nameDiv.className = "img-name";
        nameDiv.textContent = file.name.length > 32 ? file.name.slice(0, 30) + "…" : file.name;

        const sizesDiv = document.createElement("div");
        sizesDiv.className = "img-sizes";
        const originalKB = (file.size / 1024).toFixed(1);
        const compressedKB = (compressedSize / 1024).toFixed(1);
        const reductionPercent = Math.max(0, 100 - (compressedSize / file.size) * 100).toFixed(1);
        sizesDiv.innerHTML = `الأصلي: ${originalKB} كيلوبايت → مضغوط: <b>${compressedKB} كيلوبايت</b>
         <br><span style="color:#16b980">${reductionPercent}% توفير</span>
         <br><span style="font-size:0.89em;color:#229;">${width}×${height}px</span>`;

        // زر التحميل
        const actionsDiv = document.createElement("div");
        actionsDiv.className = "img-actions";
        const dlBtn = document.createElement("button");
        dlBtn.className = "download-btn";
        dlBtn.textContent = "تحميل";
        dlBtn.onclick = () => downloadSingle(compressedDataUrl, autoFileName(file.name));
        actionsDiv.appendChild(dlBtn);

        card.appendChild(originalImg);
        card.appendChild(compressedImg);
        infoDiv.appendChild(nameDiv);
        infoDiv.appendChild(sizesDiv);
        infoDiv.appendChild(actionsDiv);
        card.appendChild(infoDiv);
        gallery.appendChild(card);

        filesData.push({
          file,
          compressedDataUrl,
          compressedSize,
          fileName: autoFileName(file.name)
        });
      }
      if (filesData.length > 1) {
        allDownloadBtn.style.display = "block";
      }
    }

    async function compressImage(file, quality = 0.8) {
      const img = new Image();
      img.src = URL.createObjectURL(file);
      await img.decode();

      const maxW = 1600, maxH = 1600;
      let [w, h] = [img.width, img.height];
      if (w > maxW || h > maxH) {
        const ratio = Math.min(maxW / w, maxH / h);
        w = Math.round(w * ratio);
        h = Math.round(h * ratio);
      }
      const canvas = document.createElement("canvas");
      canvas.width = w;
      canvas.height = h;
      const ctx = canvas.getContext("2d");
      ctx.drawImage(img, 0, 0, w, h);
      const dataUrl = canvas.toDataURL("image/jpeg", quality);
      const len = (dataUrl.length * 3) / 4;
      return { compressedDataUrl: dataUrl, compressedSize: len, width: w, height: h };
    }

    function autoFileName(name) {
      let base = name.replace(/\.[^/.]+$/, "");
      return base + "_مضغوط.jpg";
    }

    function downloadSingle(dataUrl, name) {
      const a = document.createElement("a");
      a.href = dataUrl;
      a.download = name;
      a.click();
    }

    allDownloadBtn.onclick = async () => {
      if (!filesData.length) return;
      const zip = new JSZip();
      filesData.forEach(({ compressedDataUrl, fileName }) => {
        zip.file(fileName, dataURItoBlob(compressedDataUrl));
      });
      const blob = await zip.generateAsync({ type: "blob" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "compressed_images.zip";
      a.click();
    };

    function dataURItoBlob(dataURI) {
      var byteString = atob(dataURI.split(",")[1]);
      var ab = new ArrayBuffer(byteString.length);
      var ia = new Uint8Array(ab);
      for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
      }
      return new Blob([ab], { type: "image/jpeg" });
    }
  </script>
  <!-- FAQPage بنية البيانات المهيكلة (Rich Snippet, SGE, AI FAQ دعم) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "هل يتم رفع صوري؟",
        "acceptedAnswer": { "@type": "Answer", "text": "لا. تتم جميع عمليات الضغط داخل المتصفح. الصور لا تُرسل إلى أي خادم خارجي." }
      },
      {
        "@type": "Question",
        "name": "ما هي صيغ الملفات المدعومة؟",
        "acceptedAnswer": { "@type": "Answer", "text": "يمكنك رفع JPG و PNG و WebP وغيرها. يتم إنشاء الإخراج كـ JPEG لتحقيق أقصى ضغط." }
      },
      {
        "@type": "Question",
        "name": "كيف أضغط عدة صور مرة واحدة؟",
        "acceptedAnswer": { "@type": "Answer", "text": "في نافذة اختيار الملفات اضغط Ctrl أو Shift لاختيار عدة صور، أو اضغط مطولاً على الهاتف المحمول لاختيار عدة صور. سيتم معالجتها دفعة واحدة." }
      },
      {
        "@type": "Question",
        "name": "ما مقدار المساحة التي يمكن توفيرها؟",
        "acceptedAnswer": { "@type": "Answer", "text": "اعتمادًا على الجودة الأصلية والإعدادات، يمكن عادةً تقليل الحجم بنسبة 50-90%." }
      },
      {
        "@type": "Question",
        "name": "هل هناك حدود لحجم الملفات أو عدد الصور؟",
        "acceptedAnswer": { "@type": "Answer", "text": "لا توجد حدود محددة، لكن قد تقل الأداء عند معالجة أعداد كبيرة بسبب قيود متصفح الويب (حوالي 20-30 صورة مناسب)." }
      },
      {
        "@type": "Question",
        "name": "هل هناك علامات مائية أو ميزات مدفوعة؟",
        "acceptedAnswer": { "@type": "Answer", "text": "لا. بدون علامات مائية، لا حاجة للتسجيل، الاستخدام مجاني وغير محدود." }
      }
    ]
  }
  </script>
</body>
</html>
