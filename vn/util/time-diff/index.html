<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Máy tính khoảng thời gian & Đếm ngược</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Tính khoảng thời gian giữa hai ngày và xem đếm ngược thời gian thực đến ngày bạn muốn. Ngày, giờ, phút, giây. Miễn phí, chạy trên trình duyệt, thân thiện với di động." />
    <meta
      name="keywords"
      content="khoảng thời gian, đếm ngược, máy tính ngày giờ, bộ đếm thời gian, ngày, giờ, phút, giây, web, đếm ngược, tính toán ngày" />
    <meta name="author" content="Itagi" />
    <meta name="language" content="vi" />
    <meta name="theme-color" content="#1999c6" />
    <link rel="canonical" href="https://emfls.github.io/vn/util/time-diff/" />
    <link rel="icon" href="https://emfls.github.io/icon-192.png" />
    <meta property="og:title" content="Máy tính khoảng thời gian & Đếm ngược" />
    <meta
      property="og:description"
      content="Xem thời gian giữa hai thời điểm và theo dõi đếm ngược đến ngày tương lai bạn muốn." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://emfls.github.io/vn/util/time-diff/" />
    <meta property="og:image" content="https://emfls.github.io/thumbnail.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Máy tính khoảng thời gian & Đếm ngược" />
    <meta name="twitter:description" content="Kiểm tra khoảng cách hoặc xem đếm ngược thời gian thực. 100% trên trình duyệt, không cần tải lên." />
    <meta name="twitter:image" content="https://emfls.github.io/thumbnail.png" />
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QP5Q67GE5B"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-QP5Q67GE5B");
    </script>
    <!-- Google AdSense -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8830524482034754"
      crossorigin="anonymous"></script>
    <style>
      :root {
        --main: #1999c6;
        --bg: #f7fbfe;
      }
      html,
      body {
        margin: 0;
        padding: 0;
        background: var(--bg);
      }
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        color: #234;
      }
      .container {
        max-width: 390px;
        margin: 38px auto 0 auto;
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 22px #1999c61a;
        padding: 25px 14px 22px 14px;
      }
      .title {
        text-align: center;
        font-size: 1.15em;
        color: var(--main);
        font-weight: bold;
        margin-bottom: 12px;
      }
      .form-row {
        display: flex;
        flex-direction: column;
        gap: 5px;
        margin-bottom: 15px;
      }
      .form-row label {
        font-size: 1em;
        color: #147399;
        font-weight: 500;
      }
      .form-row input[type="datetime-local"] {
        box-sizing: border-box;
        padding: 10px 10px;
        border-radius: 7px;
        border: 1.2px solid #aee3f7;
        font-size: 1.08em;
        width: 100%;
        background: #fafdff;
        color: #234;
        transition: border 0.15s;
      }
      .form-row input[type="datetime-local"]:focus {
        border-color: var(--main);
      }
      .result,
      .countdown {
        background: #e2f5fc;
        border-radius: 12px;
        color: #15748d;
        font-size: 1.08em;
        padding: 13px 11px 11px 11px;
        text-align: center;
        margin-bottom: 9px;
        min-height: 38px;
        font-weight: 500;
        word-break: break-word;
      }
      .countdown {
        background: #f7ebff;
        color: #954fc9;
        margin-top: 5px;
        margin-bottom: 5px;
      }
      .footer {
        color: #789;
        text-align: center;
        font-size: 0.93em;
        margin-top: 15px;
      }
      #backBtn {
        position: fixed;
        left: 50%;
        bottom: 32px;
        transform: translateX(-50%);
        background: #1999c6;
        color: #fff;
        font-weight: 700;
        border: none;
        border-radius: 2rem;
        padding: 0.58em 1.5em;
        box-shadow: 0 4px 16px #1999c633;
        font-size: 1.09em;
        text-decoration: none;
        cursor: pointer;
        letter-spacing: 0.01em;
        transition:
          background 0.15s,
          transform 0.12s;
        z-index: 2000;
      }
      #backBtn:hover {
        background: #106d92;
        transform: translateX(-50%) scale(1.04);
      }
      @media (max-width: 500px) {
        .container {
          max-width: 98vw;
          padding: 10px 2vw 10px 2vw;
        }
        #backBtn {
          bottom: 18px;
          font-size: 0.98em;
          padding: 0.48em 1em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="title">⏳ Khoảng thời gian & Đếm ngược</div>
      <form id="diffForm" autocomplete="off">
        <div class="form-row">
          <label for="startTime">Ngày & Giờ bắt đầu</label>
          <input type="datetime-local" id="startTime" />
        </div>
        <div class="form-row">
          <label for="endTime">Ngày & Giờ kết thúc</label>
          <input type="datetime-local" id="endTime" />
        </div>
        <div class="result" id="diffResult"></div>
      </form>
      <div class="countdown" id="countdownBox"></div>
      <div class="footer">
        Tính số ngày, giờ, phút, giây giữa các ngày hoặc xem đếm ngược thời gian thực.<br />
        <b>Mẹo:</b> Nếu chỉ muốn đếm ngược, hãy chỉ đặt "Ngày & Giờ kết thúc".
      </div>
    </div>
    <a href="../" id="backBtn">Xem công cụ khác</a>
    <script>
      const startInput = document.getElementById("startTime");
      const endInput = document.getElementById("endTime");
      const result = document.getElementById("diffResult");
      const countdownBox = document.getElementById("countdownBox");
      let countdownTimer = null;

      function formatDiff(ms) {
        let abs = Math.abs(ms);
        const sign = ms >= 0 ? "" : "-";
        const days = Math.floor(abs / 86400000);
        const hours = Math.floor((abs % 86400000) / 3600000);
        const mins = Math.floor((abs % 3600000) / 60000);
        const secs = Math.floor((abs % 60000) / 1000);
        return `<b>${sign}${days} ngày</b> &nbsp; <b>${hours} giờ</b> &nbsp; <b>${mins} phút</b> &nbsp; <b>${secs} giây</b>`;
      }

      function update() {
        const start = startInput.value ? new Date(startInput.value) : null;
        const end = endInput.value ? new Date(endInput.value) : null;
        // Tính khoảng cách
        if (start && end) {
          let ms = end - start;
          if (isNaN(ms)) result.textContent = "Nhập ngày/giờ không hợp lệ.";
          else result.innerHTML = formatDiff(ms);
        } else {
          result.textContent = "";
        }
        // Đếm ngược (từ bây giờ đến cuối)
        if (end) {
          let from =
            !startInput.value || (startInput.value && new Date(startInput.value) < new Date())
              ? new Date()
              : new Date(startInput.value);
          if (isNaN(end - from)) {
            countdownBox.textContent = "";
            return;
          }
          function tick() {
            let now = new Date();
            let base =
              !startInput.value || (startInput.value && new Date(startInput.value) < now)
                ? now
                : new Date(startInput.value);
            let ms = end - base;
            if (isNaN(ms)) {
              countdownBox.textContent = "";
              return;
            }
            if (ms <= 0) {
              countdownBox.innerHTML = `<b>Thời gian đã kết thúc!</b>`;
              clearInterval(countdownTimer);
              countdownTimer = null;
              return;
            }
            countdownBox.innerHTML = `<b>Đếm ngược: </b>` + formatDiff(ms);
          }
          if (countdownTimer) clearInterval(countdownTimer);
          tick();
          countdownTimer = setInterval(tick, 1000);
        } else {
          countdownBox.textContent = "";
          if (countdownTimer) clearInterval(countdownTimer);
          countdownTimer = null;
        }
      }

      // Cập nhật ngay khi nhập thay đổi
      startInput.addEventListener("input", update);
      endInput.addEventListener("input", update);
      // Cập nhật khi tải trang
      window.addEventListener("DOMContentLoaded", update);
    </script>
    <section
      style="
        max-width: 320px;
        margin: 48px auto 24px auto;
        background: #1e1e1e;
        border-radius: 18px;
        box-shadow: 0 6px 24px #1236;
        padding: 24px;
        font-family: Arial, sans-serif;
      ">
      <div style="color: #8f94fb; font-size: 1.1em; font-weight: bold; margin-bottom: 14px">
        ❓ FAQ – Khoảng thời gian & Đếm ngược
      </div>

      <div style="margin-bottom: 12px">
        <div style="color: #8f94fb; font-weight: bold">Công cụ này có cần kết nối Internet hoặc tải lên không?</div>
        <div style="color: #f0f0f0">
          Không. Mọi tính toán diễn ra cục bộ trong trình duyệt. Không có dữ liệu nào được gửi đi.
        </div>
      </div>

      <div style="margin-bottom: 12px">
        <div style="color: #8f94fb; font-weight: bold">Làm sao sử dụng chức năng đếm ngược?</div>
        <div style="color: #f0f0f0">
          Chỉ cần đặt "Ngày & Giờ kết thúc" mà không cần nhập "Ngày & Giờ bắt đầu". Đếm ngược từ thời điểm hiện tại đến giá trị đó.
        </div>
      </div>

      <div style="margin-bottom: 12px">
        <div style="color: #8f94fb; font-weight: bold">Nếu đặt cả thời gian bắt đầu và kết thúc thì sao?</div>
        <div style="color: #f0f0f0">
          Bạn sẽ thấy cả khoảng thời gian giữa hai thời điểm và (nếu thời gian bắt đầu ≤ hiện tại) đếm ngược đến kết thúc.
        </div>
      </div>

      <div style="margin-bottom: 12px">
        <div style="color: #8f94fb; font-weight: bold">Có hiển thị kết quả âm không?</div>
        <div style="color: #f0f0f0">
          Có. Nếu "Ngày & Giờ kết thúc" sớm hơn "Ngày & Giờ bắt đầu", kết quả sẽ có dấu “-” trước.
        </div>
      </div>

      <div style="margin-bottom: 0">
        <div style="color: #8f94fb; font-weight: bold">Công cụ này có thân thiện với di động không?</div>
        <div style="color: #f0f0f0">
          Có! Công cụ đáp ứng mọi kích thước màn hình, hoạt động tốt trên điện thoại, máy tính bảng và máy tính để bàn.
        </div>
      </div>
    </section>
  </body>
</html>
