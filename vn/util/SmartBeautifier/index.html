<!doctype html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<title>Smart Beautifier (HTML/CSS/JS, chỉ thụt lề Tab)</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />

		<meta
			name="description"
			content="Dán mã HTML, CSS hoặc JavaScript lộn xộn và tự động căn chỉnh bằng Tab. 100% xử lý phía client, không cần tải lên. Trình định dạng mã web miễn phí." />
		<meta
			name="keywords"
			content="làm sạch mã, định dạng mã, js beautifier, css beautifier, html beautifier, trình định dạng mã trực tuyến, thụt lề Tab, mã gọn gàng, công cụ web, công cụ dành cho nhà phát triển, mã nguồn mở, làm sạch mã ngay lập tức" />
		<meta name="author" content="Itagi" />

		<!-- Open Graph (chia sẻ mạng xã hội) -->
		<meta property="og:title" content="Smart Beautifier – Trình định dạng mã HTML/CSS/JS trực tuyến" />
		<meta
			property="og:description"
			content="Dán mã lộn xộn và tự động căn chỉnh bằng Tab. Chỉ xử lý trong trình duyệt, an toàn và miễn phí mã nguồn mở." />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://emfls.github.io/vn/util/SmartBeautifier/" />
		<meta property="og:image" content="https://emfls.github.io/thumbnail.png" />

		<!-- Twitter Card (hình thu nhỏ Twitter) -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content="Smart Beautifier – Trình định dạng mã HTML/CSS/JS trực tuyến" />
		<meta
			name="twitter:description"
			content="Dán mã HTML, CSS, JS lộn xộn và làm sạch bằng Tab. 100% phía client, không cần tải lên." />
		<meta name="twitter:image" content="https://emfls.github.io/thumbnail.png" />
		<link rel="icon" href="https://emfls.github.io/icon-192.png" />

		<!-- Google Tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-QP5Q67GE5B"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());

			gtag("config", "G-QP5Q67GE5B");
		</script>
		<script
			async
			src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8830524482034754"
			crossorigin="anonymous"></script>

		<style>
			html,
			body {
				margin: 0;
				padding: 0;
				background: #f6fcff;
				min-height: 100%;
			}

			body {
				font-family: "Segoe UI", Arial, sans-serif;
				min-height: 100vh;
			}

			.container {
				max-width: 620px;
				margin: 38px auto 0 auto;
				background: #fff;
				border-radius: 18px;
				box-shadow: 0 4px 22px #13d2b033;
				padding: 28px 18px 22px 18px;
			}

			.logo {
				font-size: 1.25em;
				color: #19788a;
				font-weight: bold;
				margin-bottom: 6px;
				text-align: center;
			}

			.desc {
				color: #357890;
				text-align: center;
				margin-bottom: 18px;
				font-size: 0.98em;
			}

			.input-area,
			.output-area {
				width: 100%;
				box-sizing: border-box;
				min-height: 120px;
				border: 1.2px solid #cce9ef;
				border-radius: 9px;
				padding: 11px;
				font-size: 1em;
				background: #fafdff;
				font-family: "Fira Mono", "Menlo", monospace;
				resize: vertical;
				margin-bottom: 8px;
				line-height: 1.6;
				overflow-x: auto;
			}

			.output-area {
				background: #e7f9f3;
			}

			.btn,
			.btn-copy {
				background: #1495c5;
				color: #fff;
				border: none;
				border-radius: 7px;
				padding: 10px 18px;
				margin: 10px 8px 0 0;
				cursor: pointer;
				font-size: 1.03em;
				transition: background 0.18s;
			}

			.btn:active,
			.btn-copy:active {
				background: #0b6180;
			}

			.info-msg {
				color: #1c9b56;
				font-size: 0.95em;
				margin: 6px 0 10px 0;
				text-align: center;
			}

			.footer {
				color: #789;
				text-align: center;
				font-size: 0.94em;
				margin-top: 22px;
			}

			@media (max-width: 700px) {
				.container {
					max-width: 98vw;
					padding: 12px 2vw 14px 2vw;
				}

				.input-area,
				.output-area {
					font-size: 0.98em;
				}
			}

			#backBtn {
				position: fixed;
				left: 50%;
				bottom: 32px;
				transform: translateX(-50%);
				background: #13b6a7;
				color: #fff;
				font-weight: 700;
				border: none;
				border-radius: 2rem;
				padding: 0.58em 1.5em;
				box-shadow: 0 4px 16px #13d2b066;
				font-size: 1.09em;
				text-decoration: none;
				cursor: pointer;
				letter-spacing: 0.01em;
				transition: background 0.15s, transform 0.12s;
				z-index: 2000;
			}
			#backBtn:hover {
				background: #0e8078;
				transform: translateX(-50%) scale(1.04);
			}
			@media (max-width: 600px) {
				#backBtn {
					bottom: 18px;
					font-size: 0.98em;
					padding: 0.48em 1em;
				}
			}
		</style>

		<!-- js-beautify (CDN) -->
		<script src="https://cdn.jsdelivr.net/npm/js-beautify@1.15.0/js/lib/beautify.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/js-beautify@1.15.0/js/lib/beautify-css.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/js-beautify@1.15.0/js/lib/beautify-html.min.js"></script>
	</head>

	<body>
		<div class="container">
			<div class="logo">✨ Smart Beautifier</div>
			<div class="desc">
				Dán mã HTML, CSS hoặc JavaScript lộn xộn vào đây.<br />
				Tự động căn chỉnh bằng <b>Tab</b> để làm sạch mã.<br />
				<span style="color: #19788a; font-size: 0.93em">100% phía client, không cần tải lên.</span>
			</div>
			<textarea
				id="inputArea"
				class="input-area"
				placeholder="Dán mã HTML, CSS hoặc JS của bạn vào đây..."></textarea>
			<button class="btn" id="beautifyBtn">Làm sạch mã</button>
			<div style="margin-top: 8px; margin-bottom: 3px; font-size: 0.98em; color: #167088">Kết quả:</div>
			<textarea
				id="outputArea"
				class="output-area"
				readonly
				placeholder="Mã đã được làm sạch sẽ hiển thị tại đây"></textarea>
			<button class="btn-copy" id="copyBtn">Sao chép mã</button>
			<div class="info-msg" id="infoMsg"></div>
			<div class="footer">
				100% xử lý phía client, mã nguồn mở. Chạy trên js-beautify.
			</div>
			<a href="../" id="backBtn">Công cụ khác</a>
		</div>

		<script>
			function detectType(code) {
				// Ưu tiên phát hiện HTML
				if (
					/^\s*<!DOCTYPE html/i.test(code) ||
					/<html[\s>]/i.test(code) ||
					/<body[\s>]/i.test(code) ||
					/<head[\s>]/i.test(code) ||
					/<div[\s>]/i.test(code) ||
					/<style[\s>]/i.test(code) ||
					/<script[\s>]/i.test(code)
				)
					return "html";
				// Phát hiện CSS
				if (
					/^[\s\S]*?\{[\s\S]*?\}[\s;]*$/.test(code) && // có khối ngoặc nhọn
					/^[\s\S]*?[\.\#a-zA-Z0-9\-]+\s*\{[\s\S]*?\}/.test(code)
				)
					return "css";
				// JS (function, var, let, const, =>, import, export, require, if, for, while, etc)
				if (
					/\b(function|var|let|const|=>|import |export |require\(|if\s*\(|for\s*\(|while\s*\(|console\.|window\.|document\.|class\s+\w+)/.test(
						code
					)
				)
					return "js";
				// Mặc định là HTML
				return "html";
			}

			document.getElementById("beautifyBtn").onclick = function () {
				var code = document.getElementById("inputArea").value;
				var outputArea = document.getElementById("outputArea");
				var infoMsg = document.getElementById("infoMsg");
				if (!code.trim()) {
					infoMsg.textContent = "Vui lòng dán mã vào trước.";
					outputArea.value = "";
					return;
				}
				// Luôn dùng Tab ("\t") để thụt lề
				let indent_char = "\t",
					indent_size = 1;
				var type = detectType(code);
				var beautified = "";
				try {
					if (type === "html") {
						beautified = html_beautify(code, {
							indent_size: indent_size,
							indent_char: indent_char,
							wrap_line_length: 120,
							unformatted: [],
							preserve_newlines: true,
							content_unformatted: []
						});
					} else if (type === "css") {
						beautified = css_beautify(code, {
							indent_size: indent_size,
							indent_char: indent_char
						});
					} else if (type === "js") {
						beautified = js_beautify(code, {
							indent_size: indent_size,
							indent_char: indent_char,
							max_preserve_newlines: 2
						});
					}
					outputArea.value = beautified;
					infoMsg.textContent =
						"Đã làm sạch! (" + type.toUpperCase() + ", " + beautified.length + " ký tự)";
				} catch (e) {
					infoMsg.textContent = "Lỗi: " + (e.message || e);
					outputArea.value = "";
				}
			};

			document.getElementById("copyBtn").onclick = function () {
				var outputArea = document.getElementById("outputArea");
				outputArea.select();
				document.execCommand("copy");
				document.getElementById("infoMsg").textContent = "Đã sao chép!";
			};
		</script>

		<section
			style="
				max-width: 320px;
				margin: 48px auto 24px auto;
				background: #1e1e1e;
				border-radius: 18px;
				box-shadow: 0 6px 24px #1236;
				padding: 20px;
				font-family: Arial, sans-serif;
			">
			<div style="color: #8f94fb; font-size: 1.1em; font-weight: bold; margin-bottom: 12px">
				FAQ – Smart Beautifier
			</div>

			<div style="margin-bottom: 12px">
				<div style="color: #8f94fb; font-weight: bold">Q. Công cụ này hỗ trợ ngôn ngữ nào?</div>
				<div style="color: #f0f0f0">
					Hỗ trợ HTML, CSS và JavaScript. Công cụ tự động nhận diện ngôn ngữ dựa trên nội dung.
				</div>
			</div>

			<div style="margin-bottom: 12px">
				<div style="color: #8f94fb; font-weight: bold">Q. Sử dụng kiểu thụt lề nào?</div>
				<div style="color: #f0f0f0">
					Chỉ dùng ký tự Tab. Công cụ định dạng mã bằng Tab thay vì space để giữ phong cách nhất quán.
				</div>
			</div>

			<div style="margin-bottom: 12px">
				<div style="color: #8f94fb; font-weight: bold">Q. Dán mã vào đây có an toàn không?</div>
				<div style="color: #f0f0f0">
					Có. Tất cả định dạng được thực hiện hoàn toàn trong trình duyệt. Không tải lên hay lưu giữ mã, bảo mật dữ liệu.
				</div>
			</div>

			<div style="margin-bottom: 12px">
				<div style="color: #8f94fb; font-weight: bold">Q. Làm sao để sao chép mã đã định dạng?</div>
				<div style="color: #f0f0f0">
					Nhấp “Làm sạch mã” rồi nhấn “Sao chép mã” để sao chép ngay vào clipboard.
				</div>
			</div>

			<div style="margin-bottom: 0">
				<div style="color: #8f94fb; font-weight: bold">Q. Mã chưa hoàn chỉnh hay lỗi cũng định dạng được?</div>
				<div style="color: #f0f0f0">
					Có. Nếu mã đủ ngữ cảnh để phân tích, công cụ vẫn sẽ căn chỉnh và thụt lề lại khối mã, dù có thể không hoàn toàn chuẩn cú pháp.
				</div>
			</div>
		</section>
	</body>
</html>
