<!DOCTYPE html>
<html lang="ko">
<head>
    <title>자동 사이트맵 생성기</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>사이트맵 생성 중...</h1>
    <div id="result"></div>
    
    <script>
    // 여기에 여러분의 GitHub 정보를 입력하세요
    const GITHUB_USERNAME = 'emfls';  // 여기를 수정하세요
    const REPO_NAME = 'kor/report/camp/';       // 여기를 수정하세요
    const BASE_URL = `https://${GITHUB_USERNAME}.github.io/${REPO_NAME}`;
    
    async function generateSitemap() {
        try {
            const response = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents`);
            const files = await response.json();
            
            let sitemap = '<?xml version="1.0" encoding="UTF-8"?>\n';
            sitemap += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n';
            
            const today = new Date().toISOString().split('T')[0];
            
            // HTML 파일들만 찾아서 사이트맵에 추가
            files.forEach(file => {
                if (file.name.endsWith('.html') || file.name.endsWith('.htm')) {
                    sitemap += `  <url>\n`;
                    sitemap += `    <loc>${BASE_URL}/${file.name}</loc>\n`;
                    sitemap += `    <lastmod>${today}</lastmod>\n`;
                    sitemap += `    <changefreq>weekly</changefreq>\n`;
                    sitemap += `    <priority>0.8</priority>\n`;
                    sitemap += `  </url>\n`;
                }
            });
            
            sitemap += '</urlset>';
            
            // 결과 표시
            document.getElementById('result').innerHTML = 
                '<h2>생성된 사이트맵:</h2>' +
                '<textarea rows="20" cols="80">' + sitemap + '</textarea>' +
                '<br><br><button onclick="downloadSitemap()">sitemap.xml 다운로드</button>';
            
            window.generatedSitemap = sitemap;
            
        } catch (error) {
            document.getElementById('result').innerHTML = 
                '<p style="color: red;">오류: ' + error.message + '</p>' +
                '<p>GitHub 사용자명과 저장소명을 확인해주세요.</p>';
        }
    }
    
    function downloadSitemap() {
        const blob = new Blob([window.generatedSitemap], { type: 'text/xml' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'sitemap.xml';
        a.click();
        URL.revokeObjectURL(url);
    }
    
    // 페이지 로드 시 자동 실행
    generateSitemap();
    </script>
</body>
</html>
